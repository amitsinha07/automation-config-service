meta:
  domain: ONDC:RETeB2B
  version: 1.2.5
  flowId: Order_to_confirm_to_fulfillment_(Prepaid)
transaction_data:
  transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
  latest_timestamp: 1970-01-01T00:00:00.000Z
  bap_id: sample-bap-id
  bap_uri: https://bap.example.com
  bpp_id: sample-bpp-id
  bpp_uri: https://bpp.example.com
steps:
  - api: select
    action_id: select
    owner: BAP
    responseFor: null
    unsolicited: false
    description: First Select where items are selected
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKCWNvbnN0IGlucHV0cyA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzOwoJaWYgKCFpbnB1dHMpIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKCgkKCWlmICghZGVmYXVsdFBheWxvYWQubWVzc2FnZSkgZGVmYXVsdFBheWxvYWQubWVzc2FnZSA9IHt9OwoJaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyID0ge307CglpZiAoIWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBbe31dOwoJfQoKCWNvbnN0IGZ1bGZpbGxtZW50ID0gZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF07Cgljb25zdCBjdXN0b21lciA9IHt9OwoKCglpZiAoaW5wdXRzLmN1c3RvbWVyX2lkKSBjdXN0b21lci5pZCA9IGlucHV0cy5jdXN0b21lcl9pZDsKCgljb25zdCBjcmVkcyA9IFtdOwoJaWYgKGlucHV0cy50YXhfbnVtYmVyKSBjcmVkcy5wdXNoKHsgaWQ6IGlucHV0cy50YXhfbnVtYmVyLCB0eXBlOiAidGF4X251bWJlciIgfSk7CglpZiAoaW5wdXRzLnByb3ZpZGVyX3RheF9udW1iZXIpIGNyZWRzLnB1c2goeyBpZDogaW5wdXRzLnByb3ZpZGVyX3RheF9udW1iZXIsIHR5cGU6ICJwcm92aWRlcl90YXhfbnVtYmVyIiB9KTsKCWlmIChjcmVkcy5sZW5ndGggPiAwKSBjdXN0b21lci5wZXJzb24gPSB7IGNyZWRzIH07CgoJaWYgKGlucHV0cy5zaG9wX25hbWUgfHwgaW5wdXRzLmFkZHJlc3MgfHwgaW5wdXRzLmNpdHlfY29kZSB8fCBpbnB1dHMuc3RhdGVfY29kZSkgewoJCWN1c3RvbWVyLm9yZ2FuaXphdGlvbiA9IHt9OwoJCWlmIChpbnB1dHMuc2hvcF9uYW1lKSBjdXN0b21lci5vcmdhbml6YXRpb24uZGVzY3JpcHRvciA9IHsgbmFtZTogaW5wdXRzLnNob3BfbmFtZSB9OwoJCWlmIChpbnB1dHMuYWRkcmVzcykgY3VzdG9tZXIub3JnYW5pemF0aW9uLmFkZHJlc3MgPSBpbnB1dHMuYWRkcmVzczsKCQlpZiAoaW5wdXRzLmNpdHlfY29kZSkgY3VzdG9tZXIub3JnYW5pemF0aW9uLmNpdHkgPSB7IGNvZGU6IGlucHV0cy5jaXR5X2NvZGUgfTsKCQlpZiAoaW5wdXRzLnN0YXRlX2NvZGUpIGN1c3RvbWVyLm9yZ2FuaXphdGlvbi5zdGF0ZSA9IHsgY29kZTogaW5wdXRzLnN0YXRlX2NvZGUgfTsKCX0KCglpZiAoaW5wdXRzLnBob25lX251bWJlciB8fCBpbnB1dHMuZW1haWwpIHsKCQljdXN0b21lci5jb250YWN0ID0ge307CgkJaWYgKGlucHV0cy5waG9uZV9udW1iZXIpIGN1c3RvbWVyLmNvbnRhY3QucGhvbmUgPSBpbnB1dHMucGhvbmVfbnVtYmVyOwoJCWlmIChpbnB1dHMuZW1haWwpIGN1c3RvbWVyLmNvbnRhY3QuZW1haWwgPSBpbnB1dHMuZW1haWw7Cgl9CgoJaWYgKE9iamVjdC5rZXlzKGN1c3RvbWVyKS5sZW5ndGggPiAwKSB7CgkJZnVsZmlsbG1lbnQuY3VzdG9tZXIgPSBjdXN0b21lcjsKCX0KCgoJaWYgKEFycmF5LmlzQXJyYXkoaW5wdXRzLml0ZW1zKSAmJiBpbnB1dHMuaXRlbXMubGVuZ3RoID4gMCkgewoKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gaW5wdXRzLml0ZW1zLm1hcCgoaXRlbSkgPT4gKHsKCQkJaWQ6IGl0ZW0uaXRlbUlkLAoJCQlsb2NhdGlvbl9pZDogaXRlbS5sb2NhdGlvbiwKCQkJcXVhbnRpdHk6IHsgY291bnQ6IE51bWJlcihpdGVtLnF1YW50aXR5KSB9LAoJCQlmdWxmaWxsbWVudF9pZDogaXRlbS5mdWxmaWxsbWVudF9pZCAKCQl9KSk7CgoJCgkJc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMgPSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zLm1hcChpdGVtID0+ICh7CgkJCWlkOiBpdGVtLmlkLAoJCQlmdWxmaWxsbWVudF9pZDogaXRlbS5mdWxmaWxsbWVudF9pZAoJCX0pKTsKCX0KCgoJaWYgKGlucHV0cy5jaXR5X2NvZGUpIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQuY2l0eSA9IGlucHV0cy5jaXR5X2NvZGU7CgoJY29uc29sZS5sb2coInNlc3Npb24gc2F2ZWQgaXRlbXM6IiwgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMpKTsKCglyZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: select
          timestamp: 2025-12-29T06:22:03.809Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                location_id: L1
                quantity:
                  count: 20
            offers:
              - id: discp10
            fulfillments:
              - end:
                  location:
                    gps: 19.129076,72.825803
                    address:
                      area_code: "400053"
      saveData:
        bapId: $.context.bap_id
        message_id: $.context.message_id
        selected_items: $.message.order.items[*]
        payload_city: $.context.city
        selected_offers: $.message.order.offers[*]
        provider: $.message.order.provider
        RET10Catalog: EVAL#ZnVuY3Rpb24gZ2V0U2F2ZShlKXtyZXR1cm57Y2F0YWxvZzp7ImJwcC9mdWxmaWxsbWVudHMiOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSJ9LHtpZDoiRjIiLHR5cGU6IlNlbGYtUGlja3VwIn0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5In0sXSwiYnBwL2Rlc2NyaXB0b3IiOntuYW1lOiJNb2NrIFNlbGxlciBOUCIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIixzaG9ydF9kZXNjOiJTZWxsZXIgTWFya2V0cGxhY2UiLGxvbmdfZGVzYzoiU2VsbGVyIE1hcmtldHBsYWNlIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIl0sdGFnczpbe2NvZGU6ImJwcF90ZXJtcyIsbGlzdDpbe2NvZGU6Im5wX3R5cGUiLHZhbHVlOiJNU04ifSxdfSxdfSwiYnBwL3Byb3ZpZGVycyI6W3t0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiJ9LHJhdGluZzoiNCIsZGVzY3JpcHRvcjp7bmFtZToiU3RvcmUgMSIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyIsc2hvcnRfZGVzYzoiU3RvcmUgMSIsbG9uZ19kZXNjOiJTdG9yZSAxIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyJdfSx0dGw6IlAxRCIsbG9jYXRpb25zOlt7aWQ6IkwxIix0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiIsZGF5czoiMSwyLDMsNCw1LDYsNyIsc2NoZWR1bGU6e2hvbGlkYXlzOltdfSxyYW5nZTp7c3RhcnQ6IjAwMDAiLGVuZDoiMjM1OSJ9fSxncHM6IjE5LjEyOTA3Niw3Mi44MjU4MDMiLGFkZHJlc3M6e3N0cmVldDoiMSAmIDIsQU1BUiBKWU9USSBDSFMuQkxERy4sT1BQLk5BTkQgS1JJUEEgSEFMTCIsbG9jYWxpdHk6IkFOREhFUkkgRk9VUiBCVU5HTE9XIEFNQVIgSllPVEkgQ0hTIixjaXR5OiJtb2NrLXNlbGxlci1jaXR5IixzdGF0ZToibW9jay1zdGF0ZSIsYXJlYV9jb2RlOiI0MDAwNTMifSxjaXJjbGU6e2dwczoiMTkuMTI5MDc2LDcyLjgyNTgwMyIscmFkaXVzOnt1bml0OiJrbSIsdmFsdWU6IjMifX19LF0sZnVsZmlsbG1lbnRzOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM3MTAiLGVtYWlsOiJub2JvZHlAbm9tYWlsLmNvbSJ9fSx7aWQ6IkYyIix0eXBlOiJTZWxmLVBpY2t1cCIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM5OTkiLGVtYWlsOiJtb2NrQG5vbWFpbC5jb20ifX0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5Iixjb250YWN0OntwaG9uZToiOTU5NDY2Mzg4OCIsZW1haWw6Im1vY2syQG5vbWFpbC5jb20ifX0sXSxpdGVtczpbe2Rlc2NyaXB0b3I6e25hbWU6IlBsYWluIEF0dGEiLGNvZGU6IjE6OTc4MDIwMTM3OTYyIixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjQuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIyMDAuMDAiLG1heGltdW1fdmFsdWU6IjIwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiIzIn19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkxIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiUGxhaW4gQXR0YSIsY29kZToiMTo0NzQxMzE4MTkxODk0IixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjMuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIzMDAuMDAiLG1heGltdW1fdmFsdWU6IjMwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiI1In19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkyIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiQWxwaGFuc28gTWFuZ28iLGNvZGU6IjE6NzM5NjM3Mzk3NTk1NyIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIixzaG9ydF9kZXNjOiJBbHBoYW5zbyIsbG9uZ19kZXNjOiJBbHBoYW5zbyBNYW5nbyBmcmVzaGx5IGhhbmQgcGlja2VkIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIl19LHJhdGluZzoiMy4wIixwcmljZTp7Y3VycmVuY3k6IklOUiIsdmFsdWU6IjI1MC4wMCIsbWF4aW11bV92YWx1ZToiMjUwLjAwIn0scXVhbnRpdHk6e3VuaXRpemVkOnttZWFzdXJlOnt1bml0OiJraWxvZ3JhbSIsdmFsdWU6IjEifX0sYXZhaWxhYmxlOntjb3VudDoiOTkifSxtYXhpbXVtOntjb3VudDoiOTkifX0sY2F0ZWdvcnlfaWQ6IkZydWl0cyBhbmQgVmVnZXRhYmxlcyIsZnVsZmlsbG1lbnRfaWQ6IkYxIixsb2NhdGlvbl9pZDoiTDEiLCJAb25kYy9vcmcvcmV0dXJuYWJsZSI6ITEsIkBvbmRjL29yZy9jYW5jZWxsYWJsZSI6ITEsIkBvbmRjL29yZy9yZXR1cm5fd2luZG93IjoiUDFEIiwiQG9uZGMvb3JnL3NlbGxlcl9waWNrdXBfcmV0dXJuIjohMSwiQG9uZGMvb3JnL3RpbWVfdG9fc2hpcCI6IlBUNU0iLCJAb25kYy9vcmcvYXZhaWxhYmxlX29uX2NvZCI6ITAsIkBvbmRjL29yZy9jb250YWN0X2RldGFpbHNfY29uc3VtZXJfY2FyZSI6IlJhbWVzaCxyYW1lc2hAYWJjLmNvbSwxODAwNDI1NDQ0NCIsdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkzIn0sXSx0YWdzOlt7Y29kZToidGltaW5nIixsaXN0Olt7Y29kZToidHlwZSIsdmFsdWU6IkFsbCJ9LHtjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImRheV9mcm9tIix2YWx1ZToiMSJ9LHtjb2RlOiJkYXlfdG8iLHZhbHVlOiI3In0se2NvZGU6InRpbWVfZnJvbSIsdmFsdWU6IjAwMDAifSx7Y29kZToidGltZV90byIsdmFsdWU6IjIzNTkifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiQXR0YSwgRmxvdXJzIGFuZCBTb29qaSJ9LHtjb2RlOiJ0eXBlIix2YWx1ZToiMTEifSx7Y29kZToidW5pdCIsdmFsdWU6InBpbmNvZGUifSx7Y29kZToidmFsIix2YWx1ZToiNTYwMDAxLTU2MDA3Niw1NjAwODMifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiRnJ1aXRzIGFuZCBWZWdldGFibGVzIn0se2NvZGU6InR5cGUiLHZhbHVlOiIxMCJ9LHtjb2RlOiJ2YWwiLHZhbHVlOiIzIn0se2NvZGU6InVuaXQiLHZhbHVlOiJrbSJ9LF19LF0sY2F0ZWdvcmllczpbe2lkOiJWMSIsdGFnczpbe2NvZGU6InR5cGUiLGxpc3Q6W3tjb2RlOiJ0eXBlIix2YWx1ZToidmFyaWFudF9ncm91cCJ9LF19LHtjb2RlOiJhdHRyIixsaXN0Olt7Y29kZToibmFtZSIsdmFsdWU6Iml0ZW0ucXVhbnRpdHkudW5pdGl6ZWQubWVhc3VyZSJ9LHtjb2RlOiJzZXEiLHZhbHVlOiIxIn0sXX0sXSxkZXNjcmlwdG9yOntuYW1lOiJQbGFpbiBBdHRhIn19LF0saWQ6IlAxIixvZmZlcnM6W3tpZDoiRkxBVDUwIixkZXNjcmlwdG9yOntjb2RlOiJkaXNjb3VudCIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL29mZmVyMi1iYW5uZXIucG5nIl19LGxvY2F0aW9uX2lkczpbIkwxIl0saXRlbV9pZHM6WyJJMSIsIkkyIiwiSTMiXSx0aW1lOntsYWJlbDoidmFsaWQiLHJhbmdlOntzdGFydDoiMjAyNC0xMi0yM1QwNjo1NTo0NS4wMzVaIixlbmQ6IjIwMzAtMTItMjNUMDg6MTI6MTUuMDMzWiJ9fSx0YWdzOlt7Y29kZToicXVhbGlmaWVyIixsaXN0Olt7Y29kZToibWluX3ZhbHVlIix2YWx1ZToiMTAwLjAwIn0sXX0se2NvZGU6ImJlbmVmaXQiLGxpc3Q6W3tjb2RlOiJ2YWx1ZV90eXBlIix2YWx1ZToiYW1vdW50In0se2NvZGU6InZhbHVlIix2YWx1ZToiLTUwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LHtpZDoiYnV5MmdldDMiLGRlc2NyaXB0b3I6e2NvZGU6ImJ1eVhnZXRZIixpbWFnZXM6WyJodHRwczovL3NucC5jb20vaW1hZ2VzL29mZmVyMS1iYW5uZXIud2VicCJdfSxsb2NhdGlvbl9pZHM6WyJMMSJdLGNhdGVnb3J5X2lkczpbXSxpdGVtX2lkczpbIkkxIiwiSTIiLCJJMyJdLHRpbWU6e2xhYmVsOiJ2YWxpZCIscmFuZ2U6e3N0YXJ0OiIyMDI1LTAxLTAxVDE2OjAwOjAwLjAwMFoiLGVuZDoiMjAzMC0wMS0wMVQyMzowMDowMC4wMDBaIn19LHRhZ3M6W3tjb2RlOiJxdWFsaWZpZXIiLGxpc3Q6W3tjb2RlOiJpdGVtX2NvdW50Iix2YWx1ZToiMiJ9LF19LHtjb2RlOiJiZW5lZml0IixsaXN0Olt7Y29kZToiaXRlbV9jb3VudCIsdmFsdWU6IjEifSx7Y29kZToiaXRlbV9pZCIsdmFsdWU6IkkyIn0se2NvZGU6Iml0ZW1fdmFsdWUiLHZhbHVlOiIwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LF19LF19fX0=
        saved_fulfillments: $.message.order.fulfillments
      inputs:
        id: RetailerCustomerInput
        jsonSchema:
          $schema: http://json-schema.org/draft-07/schema#
          type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum:
                - new
                - existing
              description: Retailer type
            customer_id:
              type: string
              description: Customer ID
            phone_number:
              type: string
              description: Retailer phone number
            email:
              type: string
              format: email
              description: Retailer email address
            tax_number:
              type: string
              description: GST / Tax number
            provider_tax_number:
              type: string
              description: PAN / Provider tax number
            shop_name:
              type: string
              description: Retailer shop name
            address:
              type: string
              description: Retailer address
            city_code:
              type: string
              description: City code
            state_code:
              type: string
              description: State code (default KA)
            items:
              type: array
              default: []
              items:
                type: object
                additionalProperties: true
                properties:
                  itemId:
                    type: string
                    default: I1
                  quantity:
                    type: number
                    default: 1
                  location:
                    type: string
                    default: L1
                  fulfillment_id:
                    type: string
                    description: Fulfillment ID (e.g., F1, F2)
                    default: F1
                default: {}
          required:
            - type
          allOf:
            - if:
                properties:
                  type:
                    const: new
                required:
                  - type
              then:
                required:
                  - phone_number
                  - email
                  - tax_number
                  - provider_tax_number
                  - shop_name
                  - address
                  - city_code
                  - state_code
  - api: on_select
    action_id: on_select
    owner: BPP
    responseFor: select
    unsolicited: false
    description: On-select response to select
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBjcmVhdGVRdW90ZSgKICBzZWxlY3RlZEl0ZW1zLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRQYXlsb2FkLAogIGZ1bGZpbGxtZW50cywKICBjYW5jZWxsZWQgPSBmYWxzZQopIHsKICBsZXQgdG90YWxQcmljZSA9IDA7CiAgbGV0IGJyZWFrdXBPYmplY3QgPSBbXTsKCiAgY29uc3QgY2F0YWxvZ0l0ZW1zID0KICAgIHNlc3Npb25EYXRhPy5SRVQxMENhdGFsb2c/LmNhdGFsb2c/LlsiYnBwL3Byb3ZpZGVycyJdPy5bMF0/Lml0ZW1zIHx8IFtdOwoKICBmb3IgKGNvbnN0IHNlbGVjdGVkSXRlbSBvZiBzZWxlY3RlZEl0ZW1zID8/IFtdKSB7CiAgICBjb25zdCBmdWxmaWxsbWVudCA9IGZ1bGZpbGxtZW50cz8uZmluZCgKICAgICAgKGYpID0+IGYuaWQgPT09IHNlbGVjdGVkSXRlbS5mdWxmaWxsbWVudF9pZAogICAgKTsKCiAgICBpZiAoIWZ1bGZpbGxtZW50IHx8IGZ1bGZpbGxtZW50LnR5cGUgIT09ICJEZWxpdmVyeSIpIGNvbnRpbnVlOwoKICAgIGNvbnN0IGNhdGFsb2dJdGVtID0gY2F0YWxvZ0l0ZW1zLmZpbmQoCiAgICAgIChpKSA9PiBpLmlkID09PSBzZWxlY3RlZEl0ZW0uaWQKICAgICk7CiAgICBpZiAoIWNhdGFsb2dJdGVtKSBjb250aW51ZTsKCgogICAgY29uc3QgcXVhbnRpdHkgPQogICAgICBzZWxlY3RlZEl0ZW0/LnF1YW50aXR5Py5jb3VudCA/PwogICAgICBzZWxlY3RlZEl0ZW0/LmNvdW50ID8/CiAgICAgIDE7CgogICAgY29uc3QgaXRlbVByaWNlID0KICAgICAgcGFyc2VGbG9hdChjYXRhbG9nSXRlbS5wcmljZS52YWx1ZSkgKiBxdWFudGl0eTsKCiAgICB0b3RhbFByaWNlICs9IGl0ZW1QcmljZTsKCiAgICBicmVha3VwT2JqZWN0LnB1c2goewogICAgICAiQG9uZGMvb3JnL2l0ZW1faWQiOiBjYXRhbG9nSXRlbS5pZCwKICAgICAgIkBvbmRjL29yZy9pdGVtX3F1YW50aXR5IjogeyBjb3VudDogcXVhbnRpdHkgfSwKICAgICAgdGl0bGU6IGNhdGFsb2dJdGVtLmRlc2NyaXB0b3IubmFtZSwKICAgICAgIkBvbmRjL29yZy90aXRsZV90eXBlIjogIml0ZW0iLAogICAgICBwcmljZTogewogICAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgICB2YWx1ZTogaXRlbVByaWNlLnRvRml4ZWQoMiksCiAgICAgIH0sCiAgICAgIGl0ZW06IHsKICAgICAgICBxdWFudGl0eTogY2F0YWxvZ0l0ZW0ucXVhbnRpdHksCiAgICAgICAgcHJpY2U6IGNhdGFsb2dJdGVtLnByaWNlLAogICAgICB9LAogICAgfSk7CiAgfQoKICByZXR1cm4gewogICAgYnJlYWt1cDogYnJlYWt1cE9iamVjdCwKICAgIHByaWNlOiB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdmFsdWU6IHRvdGFsUHJpY2UudG9GaXhlZCgyKSwKICAgIH0sCiAgICB0dGw6ICJQMUQiLAogIH07Cn0KYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKSB7CiAgY29uc3Qgc2F2ZWRGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YT8uc2F2ZWRfZnVsZmlsbG1lbnRzIHx8IFtdOwogIGNvbnN0IHNhdmVkSXRlbXMgPSBzZXNzaW9uRGF0YT8uc2VsZWN0ZWRfaXRlbXMgfHwgW107CgogIGlmICghZGVmYXVsdFBheWxvYWQubWVzc2FnZSkgZGVmYXVsdFBheWxvYWQubWVzc2FnZSA9IHt9OwogIGlmICghZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlcikgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlciA9IHt9OwoKICAvLyBSZXN0b3JlIGZ1bGZpbGxtZW50cyAoZmxhdHRlbiBpZiBuZXN0ZWQpCiAgaWYgKHNhdmVkRnVsZmlsbG1lbnRzLmxlbmd0aCkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBzYXZlZEZ1bGZpbGxtZW50cy5mbGF0KCk7CiAgfSBlbHNlIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gW107CiAgfQoKICAvLyBSZXBsYWNlIGl0ZW1zIHN0cmljdGx5IGZyb20gc2Vzc2lvbiBhbmQgaW5jbHVkZSBmdWxsIGJsb2NrCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNhdmVkSXRlbXMKICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLmlkKQogICAgLm1hcChpdGVtID0+ICh7CiAgICAgIGlkOiBpdGVtLmlkLAogICAgICBsb2NhdGlvbl9pZDogaXRlbS5sb2NhdGlvbl9pZCA/PyBpdGVtLmxvY2F0aW9uLCAvLyBzdXBwb3J0IG9sZCAibG9jYXRpb24iIGZpZWxkIGlmIHByZXNlbnQKICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHkgPz8geyBjb3VudDogMSB9LAogICAgICAuLi4oaXRlbS5mdWxmaWxsbWVudF9pZCA/IHsgZnVsZmlsbG1lbnRfaWQ6IGl0ZW0uZnVsZmlsbG1lbnRfaWQgfSA6IHt9KQogICAgfSkpOwoKICAvLyBQcmVwYXJlIGl0ZW1zIGZvciBxdW90ZSBjcmVhdGlvbgogIGNvbnN0IHF1b3RlSXRlbXMgPSBzYXZlZEl0ZW1zLm1hcChpdGVtID0+ICh7CiAgICBpZDogaXRlbS5pZCwKICAgIGNvdW50OiBpdGVtLnF1YW50aXR5Py5jb3VudCA/PyAxLAogICAgLi4uKGl0ZW0uZnVsZmlsbG1lbnRfaWQgPyB7IGZ1bGZpbGxtZW50X2lkOiBpdGVtLmZ1bGZpbGxtZW50X2lkIH0gOiB7fSkKICB9KSk7CgogIC8vIENyZWF0ZSBxdW90ZSB1c2luZyB5b3VyIGV4aXN0aW5nIGNyZWF0ZVF1b3RlIGZ1bmN0aW9uCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IGNyZWF0ZVF1b3RlKAogICAgcXVvdGVJdGVtcywKICAgIHNlc3Npb25EYXRhLAogICAgZGVmYXVsdFBheWxvYWQsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwogICk7CgogIC8vIFVwZGF0ZSBjb250ZXh0Lm1lc3NhZ2VfaWQgaWYgcHJlc2VudCBpbiBzZXNzaW9uCiAgaWYgKHNlc3Npb25EYXRhLm1lc3NhZ2VfaWQgJiYgc2Vzc2lvbkRhdGEubWVzc2FnZV9pZC5sZW5ndGggPiAwKSB7CiAgICBpZiAoIWRlZmF1bHRQYXlsb2FkLmNvbnRleHQpIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQgPSB7fTsKICAgIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQubWVzc2FnZV9pZCA9IHNlc3Npb25EYXRhLm1lc3NhZ2VfaWRbMF07CiAgfQoKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: ZnVuY3Rpb24gbWVldFJlcXVpcmVtZW50cyhzZXNzaW9uRGF0YSl7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZXMgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_select
          core_version: 1.2.5
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          transaction_id: T1
          message_id: M1
          city: std:080
          country: IND
          timestamp: 2025-01-08T08:30:30.000Z
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
            fulfillments:
              id: F1
              type: Delivery
              "@ondc/org/provider_name": ABC Distributors
              tracking: false
              "@ondc/org/category": Standard Delivery
              "@ondc/org/TAT": PT4H
              state:
                descriptor:
                  code: Serviceable
            quote:
              price:
                currency: INR
                value: "1150.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 20
                  title: Ashirwad Plain Atta 1kg
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "1040.00"
                  item:
                    quantity:
                      available:
                        count: "99"
                      maximum:
                        count: "100"
                      minimum:
                        count: "20"
                    price:
                      currency: INR
                      value: "52.00"
                - "@ondc/org/item_id": F1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "10.00"
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - "@ondc/org/item_id": F1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "0.00"
              ttl: P1D
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        on_select_items: $.message.order.items[*]
        tat: $.message.order.fulfillments[0]["@ondc/org/TAT"]
        saved_fulfillments: $.message.order.fulfillments
      inputs: {}
  - api: init
    action_id: init
    owner: BAP
    responseFor: null
    unsolicited: false
    description: "Init "
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBzYXZlZEZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhPy5zYXZlZF9mdWxmaWxsbWVudHM7CiAgY29uc3Qgc2F2ZWRJdGVtcyA9IHNlc3Npb25EYXRhPy5zZWxlY3RlZF9pdGVtcyB8fCBbXTsKCiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlID0ge307CiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyID0ge307CgogIC8vIFJlc3RvcmUgY3VzdG9tZXIgZnJvbSBzYXZlZCBmdWxmaWxsbWVudHMKICBpZiAoc2F2ZWRGdWxmaWxsbWVudHMgJiYgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHM/Lmxlbmd0aCkgewogICAgY29uc3Qgc2F2ZWRDdXN0b21lciA9IHNhdmVkRnVsZmlsbG1lbnRzPy5bMF0/LlswXT8uWzBdPy5jdXN0b21lcjsKICAgIGlmIChzYXZlZEN1c3RvbWVyKSB7CiAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLmN1c3RvbWVyID0gc2F2ZWRDdXN0b21lcjsKICAgIH0KICB9CgogIC8vIFJlc3RvcmUgaXRlbXMgZnJvbSBzZXNzaW9uIGV4YWN0bHkgYXMgc2F2ZWQKICBpZiAoc2F2ZWRJdGVtcy5sZW5ndGggPiAwKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2F2ZWRJdGVtcy5tYXAoaXRlbSA9PiAoewogICAgICBpZDogaXRlbS5pZCwKICAgICAgLi4uKGl0ZW0uZnVsZmlsbG1lbnRfaWQgPyB7IGZ1bGZpbGxtZW50X2lkOiBpdGVtLmZ1bGZpbGxtZW50X2lkIH0gOiB7fSksCiAgICAgIC4uLihpdGVtLnF1YW50aXR5ID8geyBxdWFudGl0eTogaXRlbS5xdWFudGl0eSB9IDoge30pLAogICAgICAuLi4oaXRlbS5sb2NhdGlvbl9pZCA/IHsgbG9jYXRpb25faWQ6IGl0ZW0ubG9jYXRpb25faWQgfSA6IHt9KSwKICAgCiAgICB9KSk7CiAgfQoKICBjb25zb2xlLmxvZygic2Vzc2lvbiIsIEpTT04uc3RyaW5naWZ5KHNlc3Npb25EYXRhKSk7CgogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQ==
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpewogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9pdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMgfHwgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcGF5bG9hZF9jaXR5CiAgaWYgKCFzZXNzaW9uRGF0YS5wYXlsb2FkX2NpdHkpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwYXlsb2FkX2NpdHkgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWUxPQURfQ0lUWSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHByb3ZpZGVyCiAgaWYgKCFzZXNzaW9uRGF0YS5wcm92aWRlcikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHByb3ZpZGVyIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QUk9WSURFUiIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHF1b3RlCiAgaWYgKCFzZXNzaW9uRGF0YS5xdW90ZSB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEucXVvdGUgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcXVvdGUgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1FVT1RFIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfaXRlbXMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciB0YXQKICBpZiAoIXNlc3Npb25EYXRhLnRhdCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHRhdCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfVEFUIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: init
          core_version: 1.2.5
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          transaction_id: T1
          message_id: M1
          city: std:080
          country: IND
          timestamp: 2025-01-08T09:00:00.000Z
          ttl: PT30S
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 20
            offers:
              - id: discp10
            billing:
              name: Sharma Kirana Store
              address:
                name: Shop No. 12
                building: Lakshmi Complex
                locality: MG Road
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: "560001"
              tax_number: 29AABCU9603R1ZM
              email: sharma.kirana@email.com
              phone: "9876543210"
              created_at: 2025-01-08T09:00:00.000Z
              updated_at: 2025-01-08T09:00:00.000Z
            payment:
              type: ON-FULFILLMENT
              collected_by: BPP
            fulfillments:
              - id: F1
                type: Delivery
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: Shop No. 12
                      building: Lakshmi Complex
                      locality: MG Road
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: "560001"
                  contact:
                    phone: "9876543210"
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        provider: $.message.order.provider
        billing: $.message.order.billing
        selected_np_fees: $.message.order.items[*].tags[?(@.code=="np_fees")].list[?(@.code=="id")].value
        saved_fulfillments: $.message.order.fulfillments
        saved_items: $.message.order.items
      inputs: {}
  - api: on_init
    action_id: on_init
    owner: BPP
    responseFor: init
    unsolicited: false
    description: Response to Init call
    mock:
      generate: YXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKSB7CgogIAogIGNvbnN0IHNhdmVkRnVsZmlsbG1lbnRzID0gc2Vzc2lvbkRhdGE/LnNhdmVkX2Z1bGZpbGxtZW50czsKICBjb25zdCBzYXZlZEl0ZW1zID0gc2Vzc2lvbkRhdGE/LnNlbGVjdGVkX2l0ZW1zIHx8IFtdOyAKCiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlID0ge307CiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyID0ge307CgoKICBpZiAoc2F2ZWRGdWxmaWxsbWVudHMgJiYgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHM/Lmxlbmd0aCkgewogICAgY29uc3Qgc2F2ZWRDdXN0b21lciA9IHNhdmVkRnVsZmlsbG1lbnRzPy5bMF0/LlswXT8uY3VzdG9tZXI7ICAvLyDinIUgZml4ZWQgZGVwdGgKICAgIGlmIChzYXZlZEN1c3RvbWVyKSB7CiAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLmN1c3RvbWVyID0gc2F2ZWRDdXN0b21lcjsKICAgIH0KICB9CgogIAogIGlmIChzYXZlZEl0ZW1zLmxlbmd0aCA+IDApIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzYXZlZEl0ZW1zLm1hcChpdGVtID0+ICh7CiAgICAgIGlkOiBpdGVtLmlkLAogICAgICAuLi4oaXRlbS5mdWxmaWxsbWVudF9pZCA/IHsgZnVsZmlsbG1lbnRfaWQ6IGl0ZW0uZnVsZmlsbG1lbnRfaWQgfSA6IHt9KSwKICAgICAgLi4uKGl0ZW0ucXVhbnRpdHkgPyB7IHF1YW50aXR5OiBpdGVtLnF1YW50aXR5IH0gOiB7fSksCiAgICAgIC4uLihpdGVtLmxvY2F0aW9uX2lkID8geyBsb2NhdGlvbl9pZDogaXRlbS5sb2NhdGlvbl9pZCB9IDoge30pLAogICAgICAKICAgIH0pKTsKICB9CgoKCgogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQ==
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzIChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_init
          core_version: 1.2.5
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          transaction_id: T1
          message_id: M1
          city: std:080
          country: IND
          timestamp: 2025-01-08T09:00:30.000Z
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 20
            billing:
              name: Sharma Kirana Store
              address:
                name: Shop No. 12
                building: Lakshmi Complex
                locality: MG Road
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: "560001"
              tax_number: 29AABCU9603R1ZM
              email: sharma.kirana@email.com
              phone: "9876543210"
              created_at: 2025-01-08T09:00:00.000Z
              updated_at: 2025-01-08T09:00:00.000Z
            fulfillments:
              - id: F1
                type: Delivery
                tracking: false
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: Shop No. 12
                      building: Lakshmi Complex
                      locality: MG Road
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: "560001"
                  contact:
                    phone: "9876543210"
            quote:
              price:
                currency: INR
                value: "1150.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 20
                  title: Ashirwad Plain Atta 1kg
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "1040.00"
                  item:
                    price:
                      currency: INR
                      value: "52.00"
                - "@ondc/org/item_id": F1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "10.00"
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - "@ondc/org/item_id": F1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "0.00"
              ttl: P1D
            payment:
              type: ON-ORDER
              collected_by: BPP
              uri: https://snp.com/pg
              status: NOT-PAID
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.54"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: upi
                  beneficiary_name: ABC Distributors
                  upi_address: abcdist@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: State Bank of India
                  branch_name: Jayanagar Branch
            tags:
              - code: bpp_terms
                list:
                  - code: tax_number
                    value: gst_number_of_sellerNP
                  - code: provider_tax_number
                    value: PAN_number_of_provider
              - code: credit
                list:
                  - code: credit_limit
                    value: "25000.00"
                  - code: valid_till
                    value: 2025-01-08T08:10:30.000Z
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        bpp_terms: $.message.order.tags[?(@.code == 'bpp_terms')]
        tags: $.message.order.tags[*]
        saved_fulfillments: $.message.order.fulfillments[*]
        saved_items: $.message.order.items
      inputs: {}
  - api: confirm
    action_id: confirm
    owner: BAP
    responseFor: null
    unsolicited: false
    description: Confirming the Order after Init
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBzYXZlZEZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhPy5zYXZlZF9mdWxmaWxsbWVudHMgfHwgW107CiAgY29uc3Qgc2F2ZWRJdGVtcyA9IHNlc3Npb25EYXRhPy5zZWxlY3RlZF9pdGVtcyB8fCBbXTsKCiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlID0ge307CiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyID0ge307CgogIC8vIFJlc3RvcmUgdGhlIHNpbmdsZSBjdXN0b21lciBvYmplY3QgZnJvbSBzYXZlZCBmdWxmaWxsbWVudHMKICBpZiAoZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHM/Lmxlbmd0aCAmJiBzYXZlZEZ1bGZpbGxtZW50cy5sZW5ndGggPiAwKSB7CiAgICAvLyBGbGF0dGVuIHRoZSBhcnJheSAyIGxldmVscyBkZWVwIHRvIGdldCB0aGUgZmlyc3QgZnVsZmlsbG1lbnQgb2JqZWN0CiAgICBjb25zdCBmaXJzdEZ1bGZpbGxtZW50ID0gc2F2ZWRGdWxmaWxsbWVudHMuZmxhdCgyKT8uWzBdOwogICAgaWYgKGZpcnN0RnVsZmlsbG1lbnQ/LmN1c3RvbWVyKSB7CiAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLmN1c3RvbWVyID0gZmlyc3RGdWxmaWxsbWVudC5jdXN0b21lcjsKICAgIH0KICB9CgogIC8vIFJlc3RvcmUgaXRlbXMgZnJvbSBzZXNzaW9uIGV4YWN0bHkgYXMgc2F2ZWQKICBpZiAoc2F2ZWRJdGVtcy5sZW5ndGggPiAwKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2F2ZWRJdGVtcy5tYXAoaXRlbSA9PiAoewogICAgICBpZDogaXRlbS5pZCwKICAgICAgLi4uKGl0ZW0uZnVsZmlsbG1lbnRfaWQgPyB7IGZ1bGZpbGxtZW50X2lkOiBpdGVtLmZ1bGZpbGxtZW50X2lkIH0gOiB7fSksCiAgICAgIC4uLihpdGVtLnF1YW50aXR5ID8geyBxdWFudGl0eTogaXRlbS5xdWFudGl0eSB9IDoge30pLAogICAgICAuLi4oaXRlbS5sb2NhdGlvbl9pZCA/IHsgbG9jYXRpb25faWQ6IGl0ZW0ubG9jYXRpb25faWQgfSA6IHt9KQogICAgfSkpOwogIH0KCiAgY29uc29sZS5sb2coIlJlc3RvcmVkIGN1c3RvbWVyIGFuZCBpdGVtcyBmb3IgY29uZmlybSBjYWxsOiIsIEpTT04uc3RyaW5naWZ5KGRlZmF1bHRQYXlsb2FkKSk7CgogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQ==
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: confirm
          core_version: 1.2.5
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          transaction_id: T1
          message_id: M1
          city: std:080
          country: IND
          timestamp: 2025-01-08T09:05:00.000Z
          ttl: PT30S
        message:
          order:
            id: O1
            state: Created
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 20
            billing:
              name: Sharma Kirana Store
              address:
                name: Shop No. 12
                building: Lakshmi Complex
                locality: MG Road
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: "560001"
              tax_number: 29AABCU9603R1ZM
              email: sharma.kirana@email.com
              phone: "9876543210"
              created_at: 2025-01-08T09:00:00.000Z
              updated_at: 2025-01-08T09:00:00.000Z
            fulfillments:
              - id: F1
                type: Delivery
                "@ondc/org/TAT": P2D
                tracking: false
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: Shop No. 12
                      building: Lakshmi Complex
                      locality: MG Road
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: "560001"
                  contact:
                    phone: "9876543210"
                    email: sharma.kirana@email.com
            quote:
              price:
                currency: INR
                value: "1150.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 20
                  title: Ashirwad Plain Atta 1kg
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "1040.00"
                  item:
                    price:
                      currency: INR
                      value: "52.00"
                - "@ondc/org/item_id": F1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "10.00"
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - "@ondc/org/item_id": F1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "0.00"
              ttl: P1D
            payment:
              uri: https://ondc.transaction.com/payment
              tl_method: http/get
              params:
                currency: INR
                transaction_id: "3937"
                amount: "1150"
              status: NOT-PAID
              type: ON-FULFILLMENT
              collected_by: BPP
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.54"
              "@ondc/org/settlement_basis": delivery
              "@ondc/org/settlement_window": P1D
              "@ondc/org/withholding_amount": "0.00"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: upi
                  beneficiary_name: ABC Distributors
                  upi_address: abcdist@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: State Bank of India
                  branch_name: Jayanagar Branch
            tags:
              - code: bpp_terms
                list:
                  - code: tax_number
                    value: gst_number_of_sellerNP
                  - code: provider_tax_number
                    value: PAN_number_of_provider
              - code: bap_terms
                list:
                  - code: accept_bpp_terms
                    value: Y
                  - code: static_terms
                    value: https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                  - code: tax_number
                    value: gst_number_of_buyerNP
            created_at: 2025-01-08T09:05:00.000Z
            updated_at: 2025-01-08T09:05:00.000Z
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        payment: $.message.order.payment
        order_state: $.message.order.state
        order_created_at: $.message.order.created_at
        bap_terms: $.message.order.tags[?(@.code == 'bap_terms')]
        order_id: $.message.order.id
        saved_fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: on_confirm
    action_id: on_confirm
    owner: BPP
    responseFor: confirm
    unsolicited: false
    description: On-confirm Response to the confirm call
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBzYXZlZEZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhPy5zYXZlZF9mdWxmaWxsbWVudHMgfHwgW107CiAgY29uc3Qgc2F2ZWRJdGVtcyA9IHNlc3Npb25EYXRhPy5zZWxlY3RlZF9pdGVtcyB8fCBbXTsKIAogIGlmICghZGVmYXVsdFBheWxvYWQubWVzc2FnZSkgZGVmYXVsdFBheWxvYWQubWVzc2FnZSA9IHt9OwogIGlmICghZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlcikgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlciA9IHt9OwoKICAvLyBSZXN0b3JlIHRoZSBzaW5nbGUgY3VzdG9tZXIgb2JqZWN0IGZyb20gc2F2ZWQgZnVsZmlsbG1lbnRzCiAgaWYgKGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzPy5sZW5ndGggJiYgc2F2ZWRGdWxmaWxsbWVudHMubGVuZ3RoID4gMCkgewogICAgLy8gRmxhdHRlbiB0aGUgYXJyYXkgMiBsZXZlbHMgZGVlcCB0byBnZXQgdGhlIGZpcnN0IGZ1bGZpbGxtZW50IG9iamVjdAogICAgY29uc3QgZmlyc3RGdWxmaWxsbWVudCA9IHNhdmVkRnVsZmlsbG1lbnRzLmZsYXQoMik/LlswXTsKICAgIGlmIChmaXJzdEZ1bGZpbGxtZW50Py5jdXN0b21lcikgewogICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5jdXN0b21lciA9IGZpcnN0RnVsZmlsbG1lbnQuY3VzdG9tZXI7CiAgICB9CiAgfQoKICAvLyBSZXN0b3JlIGl0ZW1zIGZyb20gc2Vzc2lvbiBleGFjdGx5IGFzIHNhdmVkCiAgaWYgKHNhdmVkSXRlbXMubGVuZ3RoID4gMCkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNhdmVkSXRlbXMubWFwKGl0ZW0gPT4gKHsKICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgIC4uLihpdGVtLmZ1bGZpbGxtZW50X2lkID8geyBmdWxmaWxsbWVudF9pZDogaXRlbS5mdWxmaWxsbWVudF9pZCB9IDoge30pLAogICAgICAuLi4oaXRlbS5xdWFudGl0eSA/IHsgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHkgfSA6IHt9KSwKICAgICAgLi4uKGl0ZW0ubG9jYXRpb25faWQgPyB7IGxvY2F0aW9uX2lkOiBpdGVtLmxvY2F0aW9uX2lkIH0gOiB7fSkKICAgIH0pKTsKICB9CgogIGNvbnNvbGUubG9nKCJSZXN0b3JlZCBjdXN0b21lciBhbmQgaXRlbXMgZm9yIGNvbmZpcm0gY2FsbDoiLCBKU09OLnN0cmluZ2lmeShkZWZhdWx0UGF5bG9hZCkpOwoKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvcmRlcl9pZCAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEub3JkZXJfaWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvcmRlcl9pZCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT1JERVJfSUQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiYXBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJhcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5iYXBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYmFwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CQVBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzdGF0ZSAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc3RhdGUpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzdGF0ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU1RBVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXltZW50IChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5wYXltZW50IHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5wYXltZW50ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheW1lbnQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWU1FTlQiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_confirm
          core_version: 1.2.5
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          transaction_id: T1
          message_id: M1
          city: std:080
          country: IND
          timestamp: 2025-01-08T09:05:30.000Z
        message:
          order:
            id: O1
            state: Accepted
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 20
            billing:
              name: Sharma Kirana Store
              address:
                name: Shop No. 12
                building: Lakshmi Complex
                locality: MG Road
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: "560001"
              tax_number: 29AABCU9603R1ZM
              email: sharma.kirana@email.com
              phone: "9876543210"
              created_at: 2025-01-08T09:00:00.000Z
              updated_at: 2025-01-08T09:00:00.000Z
            fulfillments:
              - id: F1
                "@ondc/org/provider_name": ABC Distributors
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                "@ondc/org/TAT": P2D
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Distributors Warehouse
                    gps: 12.9563,77.6368
                    address:
                      locality: Jayanagar
                      city: Bengaluru
                      area_code: "560076"
                      state: KA
                  contact:
                    phone: "9876543210"
                    email: warehouse@abcdist.com
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: Shop No. 12
                      building: Lakshmi Complex
                      locality: MG Road
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: "560001"
                  contact:
                    phone: "9876543210"
                    email: sharma.kirana@email.com
            quote:
              price:
                currency: INR
                value: "1150.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 20
                  title: Ashirwad Plain Atta 1kg
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "1040.00"
                  item:
                    price:
                      currency: INR
                      value: "52.00"
                - "@ondc/org/item_id": F1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "10.00"
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - "@ondc/org/item_id": F1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Tax
                  "@ondc/org/title_type": tax
                  price:
                    currency: INR
                    value: "0.00"
              ttl: P1D
            payment:
              status: NOT-PAID
              type: ON-FULFILLMENT
              collected_by: BPP
              params:
                currency: INR
                amount: "1150.00"
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.54"
              "@ondc/org/settlement_basis": delivery
              "@ondc/org/settlement_window": P1D
              "@ondc/org/withholding_amount": "0.00"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  beneficiary_name: ABC Distributors
                  settlement_type: upi
                  upi_address: abcdist@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: State Bank of India
                  branch_name: Jayanagar Branch
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: gst_number_of_sellerNP
                  - code: provider_tax_number
                    value: PAN_number_of_provider
                  - code: accept_bap_terms
                    value: Y
              - code: bap_terms
                list:
                  - code: static_terms
                    value: https://github.com/ONDC-Official/protocol-network-extension/discussions/79
                  - code: tax_number
                    value: gst_number_of_buyerNP
            created_at: 2025-01-08T09:05:00.000Z
            updated_at: 2025-01-08T09:06:30.000Z
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        saved_fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: on_status
    action_id: on_status_accepted
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which accepts the order
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwovKioKICogVXRpbGl0eSB0byBjb252ZXJ0IElTTyBkdXJhdGlvbnMgdG8gc2Vjb25kcwogKi8KY29uc3QgaXNvRHVyVG9TZWMgPSAoZHVyYXRpb24pID0+IHsKICBjb25zdCBkdXJSRSA9CiAgICAvUCgoXGQrKVkpPygoXGQrKU0pPygoXGQrKVcpPygoXGQrKUQpP1Q/KChcZCspSCk/KChcZCspTSk/KChcZCspUyk/LzsKCiAgY29uc3Qgc3BsaXRUaW1lID0gZHVyUkUuZXhlYyhkdXJhdGlvbik7CiAgaWYgKCFzcGxpdFRpbWUpIHJldHVybiAwOwoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIHJldHVybiAoCiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kcwogICk7Cn07CgovKioKICogU2FmZWx5IHVwZGF0ZSBiaWxsaW5nIHRpbWVzdGFtcHMKICovCmZ1bmN0aW9uIGdldFVwZGF0ZWRCaWxsaW5nKHNhdmVkQmlsbGluZywgaW5pdGlhbGl6ZSA9IGZhbHNlKSB7CiAgaWYgKCFzYXZlZEJpbGxpbmcpIHJldHVybiB7fTsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KCi8qKgogKiBDcmVhdGUgZ2VuZXJpYyBvcmRlciBwYXlsb2FkIGZyb20gc2Vzc2lvbiBkYXRhCiAqLwpmdW5jdGlvbiBjcmVhdGVHZW5lcmljT25TdGF0dXMoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKSB7CiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlID0ge307CiAgaWYgKCFkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyKSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyID0ge307CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaWQgPSBzZXNzaW9uRGF0YS5vcmRlcl9pZD8uWzBdIHx8ICJPUkQtVU5LTk9XTiI7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyPy5bMF0gfHwge307CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zIHx8IFtdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZyA9IGdldFVwZGF0ZWRCaWxsaW5nKHNlc3Npb25EYXRhLmJpbGxpbmc/LlswXSB8fCB7fSk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHNlc3Npb25EYXRhLnF1b3RlPy5bMF0gfHwge307CiAgY29uc3QgdGltZUlTTyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnVwZGF0ZWRfYXQgPSB0aW1lSVNPOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuY3JlYXRlZF9hdCA9IHNlc3Npb25EYXRhLm9yZGVyX2NyZWF0ZWRfYXQ/LlswXSB8fCB0aW1lSVNPOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnQ/LlswXSB8fCB7fTsKCiAgLy8gRW5zdXJlIGZ1bGZpbGxtZW50cyBhcnJheSBleGlzdHMKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzIHx8IFtdOwoKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0KCi8qKgogKiBDcmVhdGVzIG9yIHVwZGF0ZXMgZnVsZmlsbG1lbnRzIHNhZmVseQogKi8KZnVuY3Rpb24gY3JlYXRlRnVsZmlsbG1lbnRzKGFjdGlvbiwgYWN0aW9uSWQsIHNlc3Npb25EYXRhLCBkZWZhdWx0RnVsZmlsbG1lbnRzID0gW10pIHsKICBpZiAoIUFycmF5LmlzQXJyYXkoZGVmYXVsdEZ1bGZpbGxtZW50cykpIGRlZmF1bHRGdWxmaWxsbWVudHMgPSBbXTsKCiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgLy8gZmFsbGJhY2sgdG8gc2Vzc2lvbkRhdGEgZnVsZmlsbG1lbnRzCiAgICBkZWZhdWx0RnVsZmlsbG1lbnRzID0gQXJyYXkuaXNBcnJheShzZXNzaW9uRGF0YS5zYXZlZF9mdWxmaWxsbWVudHM/LlswXSkgPyBzZXNzaW9uRGF0YS5zYXZlZF9mdWxmaWxsbWVudHNbMF0gOiBbXTsKICAgIGlmICghZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGgpIHJldHVybiBbXTsKICB9CgogIGlmIChhY3Rpb24gPT09ICJvbl9zdGF0dXMiKSB7CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMpCiAgICAgID8gc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cwogICAgICA6IG51bGw7CgogICAgaWYgKCFmaW5hbEZ1bGZpbGxtZW50cykgewogICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCk7CiAgICAgIGNvbnN0IHN0YXJ0X2VuZCA9IG5ldyBEYXRlKHRpbWUuZ2V0VGltZSgpICsgMTAgKiAxMDAwICogNjApLnRvSVNPU3RyaW5nKCk7CiAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZGVmYXVsdEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAuLi5mLAogICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgIC4uLmYuc3RhcnQsCiAgICAgICAgICAgICAgdGltZTogeyByYW5nZTogeyBzdGFydDogdGltZS50b0lTT1N0cmluZygpLCBlbmQ6IHN0YXJ0X2VuZCB9IH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgIHJhbmdlOiB7CiAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICB7IGNvZGU6ICJyb3V0aW5nIiwgbGlzdDogW3sgY29kZTogInR5cGUiLCB2YWx1ZTogIlAySDJQIiB9XSB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgIHsgY29kZTogImdwc19lbmFibGVkIiwgdmFsdWU6ICJubyIgfSwKICAgICAgICAgICAgICAgICAgeyBjb2RlOiAidXJsX2VuYWJsZWQiLCB2YWx1ZTogInllcyIgfSwKICAgICAgICAgICAgICAgICAgeyBjb2RlOiAidXJsIiwgdmFsdWU6ICJodHRwczovL3NlbGxlck5QLmNvbS9vbmRjL3RyYWNraW5nX3VybCIgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIHJldHVybiBmOwogICAgICB9KTsKICAgIH0KCiAgICAvLyBVcGRhdGUgc3RhdGUgaWYgbmVlZGVkCiAgICBjb25zdCBzdGF0ZU1hcCA9IHsKICAgICAgb25fc3RhdHVzX3BhY2tlZDogIlBhY2tlZCIsCiAgICAgIG9uX3N0YXR1c19hY2NlcHRlZDogIlBlbmRpbmciLAogICAgICBvbl9zdGF0dXNfYWdlbnRfYXNzaWduZWQ6ICJBZ2VudC1hc3NpZ25lZCIsCiAgICAgIG9uX3N0YXR1c19waWNrZWQ6ICJPcmRlci1waWNrZWQtdXAiLAogICAgICBvbl9zdGF0dXNfb3V0X2Zvcl9kZWxpdmVyeTogIk91dC1mb3ItZGVsaXZlcnkiLAogICAgICBvbl9zdGF0dXNfb3JkZXJfZGVsaXZlcmVkOiAiT3JkZXItZGVsaXZlcmVkIiwKICAgICAgb25fc3RhdHVzX3J0b19kZWxpdmVyZWQ6ICJDYW5jZWxsZWQiLAogICAgICBvbl9zdGF0dXNfcmVhZHlfdG9fc2hpcDogIlBhY2tlZCIsCiAgICB9OwoKICAgIGNvbnN0IHN0YXRlID0gc3RhdGVNYXBbYWN0aW9uSWRdIHx8ICJQZW5kaW5nIjsKCiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiIHx8IGYudHlwZSA9PT0gIkJ1eWVyLURlbGl2ZXJ5IikgewogICAgICAgIHJldHVybiB7IC4uLmYsIHN0YXRlOiB7IGRlc2NyaXB0b3I6IHsgY29kZTogc3RhdGUgfSB9IH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKCiAgICByZXR1cm4gZmluYWxGdWxmaWxsbWVudHM7CiAgfQoKICByZXR1cm4gZGVmYXVsdEZ1bGZpbGxtZW50czsKfQoKLyoqCiAqIE1haW4gZ2VuZXJhdGUgZnVuY3Rpb24KICovCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIC8vIEJ1aWxkIHRoZSBiYXNlIHBheWxvYWQKICBjb25zdCBnZW5lcmFsUGF5bG9hZCA9IGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpOwoKICAvLyBSZXN0b3JlIGZ1bGZpbGxtZW50cwogIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAogICAgIm9uX3N0YXR1cyIsCiAgICAib25fc3RhdHVzX2FjY2VwdGVkIiwKICAgIHNlc3Npb25EYXRhLAogICAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKICApOwoKICAvLyBSZXN0b3JlIGN1c3RvbWVyIGZyb20gc2F2ZWRfZnVsZmlsbG1lbnRzIGlmIGF2YWlsYWJsZQogIGNvbnN0IHNhdmVkRnVsZmlsbG1lbnRzID0gc2Vzc2lvbkRhdGEuc2F2ZWRfZnVsZmlsbG1lbnRzOwogIGlmICgKICAgIEFycmF5LmlzQXJyYXkoc2F2ZWRGdWxmaWxsbWVudHMpICYmCiAgICBzYXZlZEZ1bGZpbGxtZW50cy5sZW5ndGggPiAwICYmCiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cz8ubGVuZ3RoCiAgKSB7CiAgICAvLyBGbGF0dGVuIGluIGNhc2UgaXQncyBuZXN0ZWQgMiBsZXZlbHMgbGlrZSBbWy4uLl1dCiAgICBjb25zdCBmaXJzdEZ1bGZpbGxtZW50ID0gc2F2ZWRGdWxmaWxsbWVudHMuZmxhdCgyKT8uWzBdOwogICAgaWYgKGZpcnN0RnVsZmlsbG1lbnQ/LmN1c3RvbWVyKSB7CiAgICAgIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLmN1c3RvbWVyID0gZmlyc3RGdWxmaWxsbWVudC5jdXN0b21lcjsKICAgIH0KICB9CgogIC8vIFJlc3RvcmUgaXRlbXMgZnJvbSBzZXNzaW9uIGlmIHRoZXkgZXhpc3QKICBpZiAoIUFycmF5LmlzQXJyYXkoZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcykgfHwgIWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMubGVuZ3RoKSB7CiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXM/Lm1hcCgoaXRlbSkgPT4gKHsKICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgIC4uLihpdGVtLmZ1bGZpbGxtZW50X2lkID8geyBmdWxmaWxsbWVudF9pZDogaXRlbS5mdWxmaWxsbWVudF9pZCB9IDoge30pLAogICAgICAuLi4oaXRlbS5xdWFudGl0eSA/IHsgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHkgfSA6IHt9KSwKICAgICAgLi4uKGl0ZW0ubG9jYXRpb25faWQgPyB7IGxvY2F0aW9uX2lkOiBpdGVtLmxvY2F0aW9uX2lkIH0gOiB7fSksCiAgICB9KSkgfHwgW107CiAgfQoKICByZXR1cm4gZ2VuZXJhbFBheWxvYWQ7Cn0=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIGlmICghc2Vzc2lvbkRhdGEub3JkZXJfaWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvcmRlcl9pZCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT1JERVJfSUQiLAogICAgfTsKICB9CgogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgaWYgKCFzZXNzaW9uRGF0YS5wYXltZW50IHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5wYXltZW50ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheW1lbnQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWU1FTlQiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_status
          timestamp: 2025-12-29T09:59:28.640Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order:
            id: O1
            state: Accepted
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: "400053"
                locality: my street name
                name: my house or door or floor
              phone: "9898989898"
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: 2024-12-23T07:01:43.145Z
              updated_at: 2024-12-23T07:01:43.145Z
            fulfillments:
              - id: F1
                "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                "@ondc/org/TAT": PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:03:32.230Z
                      end: 2024-12-23T07:08:32.230Z
                  contact:
                    phone: "9594663710"
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: "9898989898"
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:33:32.230Z
                      end: 2024-12-23T07:04:32.230Z
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: no
                      - code: url_enabled
                        value: yes
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: "100.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 1
                  title: Plain Atta
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "100"
                  item:
                    price:
                      currency: INR
                      value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "00.00"
                - "@ondc/org/item_id": I1
                  title: Convenience Fee
                  "@ondc/org/title_type": misc
                  price:
                    currency: INR
                    value: "00.00"
              ttl: P1D
            payment:
              params:
                amount: "100.00"
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.0"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: 2024-12-23T07:03:30.516Z
            updated_at: 2024-12-23T07:03:35.230Z
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        last_updated_at: $.message.order.updated_at
        saved_fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: on_status
    action_id: on_status_packed
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which is sent when the order is packed
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIC8vIElmIHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyBpcyB1bmRlZmluZWQsIHVzZSBzYXZlZF9mdWxmaWxsbWVudHMKICBpZiAoIUFycmF5LmlzQXJyYXkoc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzKSB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICAvLyBGbGF0dGVuIHNhdmVkX2Z1bGZpbGxtZW50cyB0byBnZXQgdGhlIGZ1bGZpbGxtZW50IG9iamVjdHMKICAgIHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLnNhdmVkX2Z1bGZpbGxtZW50cz8uZmxhdCgyKSB8fCBbXTsKICB9CgogIC8vIEJ1aWxkIHRoZSBiYXNlIHBheWxvYWQKICBjb25zdCBnZW5lcmFsUGF5bG9hZCA9IGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpOwoKICAvLyBSZXN0b3JlIGZ1bGZpbGxtZW50cyBzYWZlbHkKICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKICAgICJvbl9zdGF0dXMiLAogICAgIm9uX3N0YXR1c19wYWNrZWQiLAogICAgc2Vzc2lvbkRhdGEsCiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyB8fCBbXQogICk7CgogIC8vIFJlc3RvcmUgY3VzdG9tZXIgZnJvbSBzYXZlZF9mdWxmaWxsbWVudHMgaWYgYXZhaWxhYmxlCiAgY29uc3QgZmlyc3RTYXZlZCA9IHNlc3Npb25EYXRhLnNhdmVkX2Z1bGZpbGxtZW50cz8uZmxhdCgyKT8uWzBdOwogIGlmIChmaXJzdFNhdmVkPy5jdXN0b21lciAmJiBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cz8ubGVuZ3RoKSB7CiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5jdXN0b21lciA9IGZpcnN0U2F2ZWQuY3VzdG9tZXI7CiAgfQoKICAvLyBSZXN0b3JlIGl0ZW1zIGZyb20gc2Vzc2lvbiBpZiBtaXNzaW5nCiAgaWYgKCFBcnJheS5pc0FycmF5KGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMpIHx8ICFnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zLmxlbmd0aCkgewogICAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zPy5tYXAoKGl0ZW0pID0+ICh7CiAgICAgIGlkOiBpdGVtLmlkLAogICAgICAuLi4oaXRlbS5mdWxmaWxsbWVudF9pZCA/IHsgZnVsZmlsbG1lbnRfaWQ6IGl0ZW0uZnVsZmlsbG1lbnRfaWQgfSA6IHt9KSwKICAgICAgLi4uKGl0ZW0ucXVhbnRpdHkgPyB7IHF1YW50aXR5OiBpdGVtLnF1YW50aXR5IH0gOiB7fSksCiAgICAgIC4uLihpdGVtLmxvY2F0aW9uX2lkID8geyBsb2NhdGlvbl9pZDogaXRlbS5sb2NhdGlvbl9pZCB9IDoge30pLAogICAgfSkpIHx8IFtdOwogIH0KCiAgcmV0dXJuIGdlbmVyYWxQYXlsb2FkOwp9Cg==
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc3RhdHVzX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU1RBVFVTX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_status
          timestamp: 2025-12-29T09:59:28.640Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: "400053"
                locality: my street name
                name: my house or door or floor
              phone: "9898989898"
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: 2024-12-23T07:01:43.145Z
              updated_at: 2024-12-23T07:01:43.145Z
            fulfillments:
              - id: F1
                "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Packed
                type: Delivery
                tracking: true
                "@ondc/org/TAT": PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:03:32.230Z
                      end: 2024-12-23T07:08:32.230Z
                  contact:
                    phone: "9594663710"
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: "9898989898"
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:33:32.230Z
                      end: 2024-12-23T07:04:32.230Z
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: no
                      - code: url_enabled
                        value: yes
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: "100.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 1
                  title: Plain Atta
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "100"
                  item:
                    price:
                      currency: INR
                      value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "00.00"
                - "@ondc/org/item_id": I1
                  title: Convenience Fee
                  "@ondc/org/title_type": misc
                  price:
                    currency: INR
                    value: "00.00"
              ttl: P1D
            payment:
              params:
                amount: "100.00"
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.0"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: 2024-12-23T07:03:30.516Z
            updated_at: 2024-12-23T07:03:35.230Z
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_agent_assigned
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which is sent when an agent is assigned
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIC8vIDHvuI/ig6MgRW5zdXJlIGZ1bGZpbGxtZW50cyBleGlzdCBmb3IgY3JlYXRlRnVsZmlsbG1lbnRzCiAgaWYgKCFBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cykgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzID0gc2Vzc2lvbkRhdGEuc2F2ZWRfZnVsZmlsbG1lbnRzPy5mbGF0KDIpIHx8IFtdOwogIH0KCiAgLy8gMu+4j+KDoyBCdWlsZCB0aGUgYmFzZSBwYXlsb2FkCiAgY29uc3QgZ2VuZXJhbFBheWxvYWQgPSBjcmVhdGVHZW5lcmljT25TdGF0dXMoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKTsKCiAgLy8gM++4j+KDoyBTYWZlbHkgY3JlYXRlIGZ1bGZpbGxtZW50cwogIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAogICAgIm9uX3N0YXR1cyIsCiAgICAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIiwKICAgIHNlc3Npb25EYXRhLAogICAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgfHwgW10KICApOwoKICAvLyA077iP4oOjIFJlc3RvcmUgY3VzdG9tZXIgZnJvbSBzYXZlZF9mdWxmaWxsbWVudHMgaWYgYXZhaWxhYmxlCiAgY29uc3QgZmlyc3RTYXZlZCA9IHNlc3Npb25EYXRhLnNhdmVkX2Z1bGZpbGxtZW50cz8uZmxhdCgyKT8uWzBdOwogIGlmIChmaXJzdFNhdmVkPy5jdXN0b21lciAmJiBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cz8ubGVuZ3RoKSB7CiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5jdXN0b21lciA9IGZpcnN0U2F2ZWQuY3VzdG9tZXI7CiAgfQoKICAvLyA177iP4oOjIFJlc3RvcmUgaXRlbXMgaWYgbWlzc2luZwogIGlmICghQXJyYXkuaXNBcnJheShnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zKSB8fCAhZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcy5sZW5ndGgpIHsKICAgIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcz8ubWFwKChpdGVtKSA9PiAoewogICAgICBpZDogaXRlbS5pZCwKICAgICAgLi4uKGl0ZW0uZnVsZmlsbG1lbnRfaWQgPyB7IGZ1bGZpbGxtZW50X2lkOiBpdGVtLmZ1bGZpbGxtZW50X2lkIH0gOiB7fSksCiAgICAgIC4uLihpdGVtLnF1YW50aXR5ID8geyBxdWFudGl0eTogaXRlbS5xdWFudGl0eSB9IDoge30pLAogICAgICAuLi4oaXRlbS5sb2NhdGlvbl9pZCA/IHsgbG9jYXRpb25faWQ6IGl0ZW0ubG9jYXRpb25faWQgfSA6IHt9KSwKICAgIH0pKSB8fCBbXTsKICB9CgogIHJldHVybiBnZW5lcmFsUGF5bG9hZDsKfQo=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_status
          timestamp: 2025-12-29T10:56:14.199Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: "400053"
                locality: my street name
                name: my house or door or floor
              phone: "9898989898"
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: 2024-12-23T07:01:43.145Z
              updated_at: 2024-12-23T07:01:43.145Z
            offers:
              - id: discp10
            fulfillments:
              - id: F1
                "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Agent-assigned
                type: Delivery
                tracking: true
                "@ondc/org/TAT": PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:03:32.230Z
                      end: 2024-12-23T07:08:32.230Z
                  contact:
                    phone: "9594663710"
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: "9898989898"
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:33:32.230Z
                      end: 2024-12-23T07:04:32.230Z
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: yes
                      - code: url_enabled
                        value: no
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: "100.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 1
                  title: Plain Atta
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "100"
                  item:
                    price:
                      currency: INR
                      value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "00.00"
                - "@ondc/org/item_id": I1
                  title: Convenience Fee
                  "@ondc/org/title_type": misc
                  price:
                    currency: INR
                    value: "00.00"
              ttl: P1D
            payment:
              params:
                amount: "100.00"
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.0"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: 2024-12-23T07:03:30.516Z
            updated_at: 2024-12-23T07:04:58.230Z
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_picked
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call when the rider picks up the order
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIC8vIDHvuI/ig6MgRW5zdXJlIGZ1bGZpbGxtZW50cyBleGlzdAogIGlmICghQXJyYXkuaXNBcnJheShzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMpIHx8IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cy5sZW5ndGggPT09IDApIHsKICAgIHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLnNhdmVkX2Z1bGZpbGxtZW50cz8uZmxhdCgyKSB8fCBbXTsKICB9CgogIC8vIDLvuI/ig6MgQnVpbGQgYmFzZSBwYXlsb2FkCiAgY29uc3QgZ2VuZXJhbFBheWxvYWQgPSBjcmVhdGVHZW5lcmljT25TdGF0dXMoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKTsKCiAgLy8gM++4j+KDoyBTYWZlbHkgY3JlYXRlIGZ1bGZpbGxtZW50cwogIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAogICAgIm9uX3N0YXR1cyIsCiAgICAib25fc3RhdHVzX3BpY2tlZCIsCiAgICBzZXNzaW9uRGF0YSwKICAgIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzIHx8IFtdCiAgKTsKCiAgLy8gNO+4j+KDoyBSZXN0b3JlIGN1c3RvbWVyIGZyb20gc2F2ZWRfZnVsZmlsbG1lbnRzIGlmIGF2YWlsYWJsZQogIGNvbnN0IGZpcnN0U2F2ZWQgPSBzZXNzaW9uRGF0YS5zYXZlZF9mdWxmaWxsbWVudHM/LmZsYXQoMik/LlswXTsKICBpZiAoZmlyc3RTYXZlZD8uY3VzdG9tZXIgJiYgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHM/Lmxlbmd0aCkgewogICAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uY3VzdG9tZXIgPSBmaXJzdFNhdmVkLmN1c3RvbWVyOwogIH0KCiAgLy8gNe+4j+KDoyBSZXN0b3JlIGl0ZW1zIGlmIG1pc3NpbmcKICBpZiAoIUFycmF5LmlzQXJyYXkoZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcykgfHwgIWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMubGVuZ3RoKSB7CiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXM/Lm1hcCgoaXRlbSkgPT4gKHsKICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgIC4uLihpdGVtLmZ1bGZpbGxtZW50X2lkID8geyBmdWxmaWxsbWVudF9pZDogaXRlbS5mdWxmaWxsbWVudF9pZCB9IDoge30pLAogICAgICAuLi4oaXRlbS5xdWFudGl0eSA/IHsgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHkgfSA6IHt9KSwKICAgICAgLi4uKGl0ZW0ubG9jYXRpb25faWQgPyB7IGxvY2F0aW9uX2lkOiBpdGVtLmxvY2F0aW9uX2lkIH0gOiB7fSksCiAgICB9KSkgfHwgW107CiAgfQoKICByZXR1cm4gZ2VuZXJhbFBheWxvYWQ7Cn0KCg==
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_status
          timestamp: 2025-12-29T11:01:59.338Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: "400053"
                locality: my street name
                name: my house or door or floor
              phone: "9898989898"
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: 2024-12-23T07:01:43.145Z
              updated_at: 2024-12-23T07:01:43.145Z
            fulfillments:
              - id: F1
                "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Order-picked-up
                type: Delivery
                tracking: true
                "@ondc/org/TAT": PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:03:32.230Z
                      end: 2024-12-23T07:08:32.230Z
                    timestamp: 2024-12-23T07:25:32.230Z
                  contact:
                    phone: "9594663710"
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: "9898989898"
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:33:32.230Z
                      end: 2024-12-23T07:04:32.230Z
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: no
                      - code: url_enabled
                        value: yes
                      - code: url
                        value: https://MockNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: "100.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 1
                  title: Plain Atta
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "100"
                  item:
                    price:
                      currency: INR
                      value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "00.00"
                - "@ondc/org/item_id": I1
                  title: Convenience Fee
                  "@ondc/org/title_type": misc
                  price:
                    currency: INR
                    value: "00.00"
              ttl: P1D
            payment:
              params:
                amount: "100.00"
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.0"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: 2024-12-23T07:03:30.516Z
            updated_at: 2024-12-23T07:25:32.230Z
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
      inputs: {}
  - api: track
    action_id: track
    owner: BAP
    responseFor: null
    unsolicited: false
    description: Track sent to track the order
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyX2lkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CglyZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: track
          timestamp: 2025-12-29T11:04:37.868Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order_id: O1
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_track
    action_id: on_track
    owner: BPP
    responseFor: track
    unsolicited: false
    description: On-track sent by the Seller Np in response to the track
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICAgIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQubWVzc2FnZV9pZCA9IHNlc3Npb25EYXRhLm1lc3NhZ2VfaWRbMF0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_track
          timestamp: 2025-12-29T11:06:29.036Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          tracking:
            id: F1
            url: https://MockNP.com/ondc/tracking_url
            status: active
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_status
    action_id: on_status_out_for_delivery
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status which marks that the order is out for delivery
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgcmV0dXJuIDA7CgogIGNvbnN0IHllYXJzID0gTnVtYmVyKHNwbGl0VGltZT8uWzJdKSB8fCAwOwogIGNvbnN0IG1vbnRocyA9IE51bWJlcihzcGxpdFRpbWU/Lls0XSkgfHwgMDsKICBjb25zdCB3ZWVrcyA9IE51bWJlcihzcGxpdFRpbWU/Lls2XSkgfHwgMDsKICBjb25zdCBkYXlzID0gTnVtYmVyKHNwbGl0VGltZT8uWzhdKSB8fCAwOwogIGNvbnN0IGhvdXJzID0gTnVtYmVyKHNwbGl0VGltZT8uWzEwXSkgfHwgMDsKICBjb25zdCBtaW51dGVzID0gTnVtYmVyKHNwbGl0VGltZT8uWzEyXSkgfHwgMDsKICBjb25zdCBzZWNvbmRzID0gTnVtYmVyKHNwbGl0VGltZT8uWzE0XSkgfHwgMDsKCiAgcmV0dXJuIHllYXJzICogMzE1MzYwMDAgKyBtb250aHMgKiAyNjI4Mjg4ICsgd2Vla3MgKiA2MDQ4MDAgKyBkYXlzICogODY0MDAgKyBob3VycyAqIDM2MDAgKyBtaW51dGVzICogNjAgKyBzZWNvbmRzOwp9OwoKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhleGlzdGluZ1BheWxvYWQsIHNlc3Npb25EYXRhKSB7CiAgZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaWQgPSBzZXNzaW9uRGF0YS5vcmRlcl9pZD8uWzBdOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyID0gc2Vzc2lvbkRhdGEucHJvdmlkZXI/LlswXTsKICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zIHx8IFtdOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBnZXRVcGRhdGVkQmlsbGluZyhzZXNzaW9uRGF0YS5iaWxsaW5nPy5bMF0pOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGU/LlswXTsKICBjb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnVwZGF0ZWRfYXQgPSB0aW1lSVNPOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSBzZXNzaW9uRGF0YS5vcmRlcl9jcmVhdGVkX2F0Py5bMF07CiAgZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnQ/LlswXTsKICByZXR1cm4gZXhpc3RpbmdQYXlsb2FkOwp9CgpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoYWN0aW9uLCBhY3Rpb25JZCwgc2Vzc2lvbkRhdGEsIGRlZmF1bHRGdWxmaWxsbWVudHMpIHsKICBpZiAoIUFycmF5LmlzQXJyYXkoZGVmYXVsdEZ1bGZpbGxtZW50cykgfHwgZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KCiAgaWYgKGFjdGlvbiAhPT0gIm9uX3N0YXR1cyIpIHJldHVybiBkZWZhdWx0RnVsZmlsbG1lbnRzOwoKICBjb25zdCBmdWxmaWxsbWVudHMgPSBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cykgPyBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgOiAoc2Vzc2lvbkRhdGEuc2F2ZWRfZnVsZmlsbG1lbnRzPy5mbGF0KDIpIHx8IFtdKTsKICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMpID8gc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyA6IG51bGw7CgogIGlmICghZmluYWxGdWxmaWxsbWVudHMpIHsKICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgIGNvbnN0IHN0YXJ0X2VuZCA9IG5ldyBEYXRlKHRpbWUuZ2V0VGltZSgpICsgMTAgKiAxMDAwICogNjApLnRvSVNPU3RyaW5nKCk7CgogICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMubWFwKGYgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGFydDogeyAuLi5mLnN0YXJ0LCB0aW1lOiB7IHJhbmdlOiB7IHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksIGVuZDogc3RhcnRfZW5kIH0gfSB9LAogICAgICAgICAgZW5kOiB7IC4uLmYuZW5kLCB0aW1lOiB7IHJhbmdlOiB7IHN0YXJ0OiBzdGFydF9lbmQsIGVuZDogbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikpLnRvSVNPU3RyaW5nKCkgfSB9IH0sCiAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgIHsgY29kZTogInJvdXRpbmciLCBsaXN0OiBbeyBjb2RlOiAidHlwZSIsIHZhbHVlOiAiUDJIMlAiIH1dIH0sCiAgICAgICAgICAgIHsgY29kZTogInRyYWNraW5nIiwgbGlzdDogW3sgY29kZTogImdwc19lbmFibGVkIiwgdmFsdWU6ICJubyIgfSwgeyBjb2RlOiAidXJsX2VuYWJsZWQiLCB2YWx1ZTogInllcyIgfSwgeyBjb2RlOiAidXJsIiwgdmFsdWU6ICJodHRwczovL3NlbGxlck5QLmNvbS9vbmRjL3RyYWNraW5nX3VybCIgfV0gfQogICAgICAgICAgXSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiBmOwogICAgfSk7CiAgfQoKICBsZXQgc3RhdGUgPSAiUGVuZGluZyI7CiAgc3dpdGNoIChhY3Rpb25JZCkgewogICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6IHN0YXRlID0gIlBhY2tlZCI7IGJyZWFrOwogICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjogc3RhdGUgPSAiUGVuZGluZyI7IGJyZWFrOwogICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgc3RhdGUgPSAiQWdlbnQtYXNzaWduZWQiOwogICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcChmID0+IGYudHlwZSA9PT0gIkRlbGl2ZXJ5IiA/IHsgLi4uZiwgYWdlbnQ6IHsgbmFtZTogIm1vY2stYWdlbnQiLCBwaG9uZTogIjk4ODYwOTg4NjAiIH0gfSA6IGYpOwogICAgICBicmVhazsKICAgIGNhc2UgIm9uX3N0YXR1c19waWNrZWQiOgogICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcChmID0+IGYudHlwZSA9PT0gIkRlbGl2ZXJ5IiA/IHsgLi4uZiwgc3RhcnQ6IHsgLi4uZi5zdGFydCwgdGltZTogeyAuLi5mLnN0YXJ0Py50aW1lLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9IH0gfSA6IGYpOwogICAgICBicmVhazsKICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5Ijogc3RhdGUgPSAiT3V0LWZvci1kZWxpdmVyeSI7IGJyZWFrOwogICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgIHN0YXRlID0gIk9yZGVyLWRlbGl2ZXJlZCI7CiAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKGYgPT4gZi50eXBlID09PSAiRGVsaXZlcnkiID8geyAuLi5mLCBlbmQ6IHsgLi4uZi5lbmQsIHRpbWU6IHsgLi4uZi5lbmQ/LnRpbWUsIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0gfSB9IDogZik7CiAgICAgIGJyZWFrOwogICAgY2FzZSAib25fc3RhdHVzX3J0b19kZWxpdmVyZWQiOgogICAgICBzdGF0ZSA9ICJDYW5jZWxsZWQiOwogICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcChmID0+IHsKICAgICAgICBpZiAoZi50eXBlID09PSAiUlRPIikgcmV0dXJuIHsgLi4uZiwgZW5kOiB7IC4uLmYuZW5kLCB0aW1lOiB7IC4uLmYuZW5kPy50aW1lLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9IH0sIHN0YXRlOiB7IGRlc2NyaXB0b3I6IHsgY29kZTogIlJUTy1EZWxpdmVyZWQiIH0gfSB9OwogICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHJldHVybiB7IC4uLmYsIHN0YXRlOiB7IGRlc2NyaXB0b3I6IHsgY29kZTogIkNhbmNlbGxlZCIgfSB9IH07CiAgICAgICAgcmV0dXJuIGY7CiAgICAgIH0pOwogICAgICBicmVhazsKICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoZiA9PiBmLnR5cGUgPT09ICJCdXllci1EZWxpdmVyeSIgPyB7IC4uLmYsIHRhZ3M6IFsuLi4oZi50YWdzIHx8IFtdKSwgeyBjb2RlOiAic3RhdGUiLCBsaXN0OiBbeyBjb2RlOiAicmVhZHlfdG9fc2hpcCIsIHZhbHVlOiAieWVzIiB9XSB9LCB7IGNvZGU6ICJyb3V0aW5nIiwgbGlzdDogW3sgY29kZTogInR5cGUiLCB2YWx1ZTogIlAyUCIgfV0gfV0gfSA6IGYpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6IGJyZWFrOwogIH0KCiAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoZiA9PiBmLnR5cGUgPT09ICJEZWxpdmVyeSIgPyB7IC4uLmYsIHN0YXRlOiB7IGRlc2NyaXB0b3I6IHsgY29kZTogc3RhdGUgfSB9IH0gOiBmKTsKCiAgcmV0dXJuIGZpbmFsRnVsZmlsbG1lbnRzOwp9Cgphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICAvLyBFbnN1cmUgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzIGV4aXN0cwogIGlmICghQXJyYXkuaXNBcnJheShzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMpKSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5zYXZlZF9mdWxmaWxsbWVudHM/LmZsYXQoMikgfHwgW107CgogIGNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CgogIC8vIEdlbmVyYXRlIGZ1bGZpbGxtZW50cyBzYWZlbHkKICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKICAgICJvbl9zdGF0dXMiLAogICAgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IiwKICAgIHNlc3Npb25EYXRhLAogICAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgfHwgW10KICApOwoKICAvLyBSZXN0b3JlIGN1c3RvbWVyIGZyb20gc2F2ZWRfZnVsZmlsbG1lbnRzIGlmIG1pc3NpbmcKICBjb25zdCBmaXJzdFNhdmVkID0gc2Vzc2lvbkRhdGEuc2F2ZWRfZnVsZmlsbG1lbnRzPy5mbGF0KDIpPy5bMF07CiAgaWYgKGZpcnN0U2F2ZWQ/LmN1c3RvbWVyICYmIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzPy5sZW5ndGgpIHsKICAgIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLmN1c3RvbWVyID0gZmlyc3RTYXZlZC5jdXN0b21lcjsKICB9CgogIC8vIFJlc3RvcmUgaXRlbXMgaWYgbWlzc2luZwogIGlmICghQXJyYXkuaXNBcnJheShnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zKSB8fCAhZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcy5sZW5ndGgpIHsKICAgIGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcz8ubWFwKGl0ZW0gPT4gKHsKICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgIC4uLihpdGVtLmZ1bGZpbGxtZW50X2lkID8geyBmdWxmaWxsbWVudF9pZDogaXRlbS5mdWxmaWxsbWVudF9pZCB9IDoge30pLAogICAgICAuLi4oaXRlbS5xdWFudGl0eSA/IHsgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHkgfSA6IHt9KSwKICAgICAgLi4uKGl0ZW0ubG9jYXRpb25faWQgPyB7IGxvY2F0aW9uX2lkOiBpdGVtLmxvY2F0aW9uX2lkIH0gOiB7fSksCiAgICB9KSkgfHwgW107CiAgfQoKICByZXR1cm4gZ2VuZXJhbFBheWxvYWQ7Cn0=
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_status
          timestamp: 2025-12-29T11:08:18.485Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: "400053"
                locality: my street name
                name: my house or door or floor
              phone: "9898989898"
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: 2024-12-23T07:01:43.145Z
              updated_at: 2024-12-23T07:01:43.145Z
            fulfillments:
              - id: F1
                "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Out-for-delivery
                type: Delivery
                tracking: true
                "@ondc/org/TAT": PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:03:32.230Z
                      end: 2024-12-23T07:08:32.230Z
                    timestamp: 2024-12-23T07:25:32.230Z
                  contact:
                    phone: "9594663710"
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: "9898989898"
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:33:32.230Z
                      end: 2024-12-23T07:04:32.230Z
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: yes
                      - code: url_enabled
                        value: no
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: "100.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 1
                  title: Plain Atta
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "100"
                  item:
                    price:
                      currency: INR
                      value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "00.00"
                - "@ondc/org/item_id": I1
                  title: Convenience Fee
                  "@ondc/org/title_type": misc
                  price:
                    currency: INR
                    value: "00.00"
              ttl: P1D
            payment:
              params:
                amount: "100.00"
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.0"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: 2024-12-23T07:03:30.516Z
            updated_at: 2024-12-23T07:35:32.230Z
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_order_delivered
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status which marks the order as delivered
    mock:
      generate: LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgcmV0dXJuIDA7CgogIGNvbnN0IHllYXJzID0gTnVtYmVyKHNwbGl0VGltZVsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lWzRdKSB8fCAwOwogIGNvbnN0IHdlZWtzID0gTnVtYmVyKHNwbGl0VGltZVs2XSkgfHwgMDsKICBjb25zdCBkYXlzID0gTnVtYmVyKHNwbGl0VGltZVs4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWVbMTBdKSB8fCAwOwogIGNvbnN0IG1pbnV0ZXMgPSBOdW1iZXIoc3BsaXRUaW1lWzEyXSkgfHwgMDsKICBjb25zdCBzZWNvbmRzID0gTnVtYmVyKHNwbGl0VGltZVsxNF0pIHx8IDA7CgogIHJldHVybiB5ZWFycyAqIDMxNTM2MDAwICsgbW9udGhzICogMjYyODI4OCArIHdlZWtzICogNjA0ODAwICsgZGF5cyAqIDg2NDAwICsgaG91cnMgKiAzNjAwICsgbWludXRlcyAqIDYwICsgc2Vjb25kczsKfTsKCmZ1bmN0aW9uIGdldFVwZGF0ZWRCaWxsaW5nKHNhdmVkQmlsbGluZywgaW5pdGlhbGl6ZSA9IGZhbHNlKSB7CiAgaWYgKGluaXRpYWxpemUpIHsKICAgIGNvbnN0IG5ld0lzbyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gNTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhleGlzdGluZ1BheWxvYWQsIHNlc3Npb25EYXRhKSB7CiAgZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaWQgPSBzZXNzaW9uRGF0YS5vcmRlcl9pZD8uWzBdOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyID0gc2Vzc2lvbkRhdGEucHJvdmlkZXI/LlswXTsKICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zIHx8IFtdOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBnZXRVcGRhdGVkQmlsbGluZyhzZXNzaW9uRGF0YS5iaWxsaW5nPy5bMF0pOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGU/LlswXTsKICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSBzZXNzaW9uRGF0YS5vcmRlcl9jcmVhdGVkX2F0Py5bMF07CiAgZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnQ/LlswXTsKICByZXR1cm4gZXhpc3RpbmdQYXlsb2FkOwp9CgpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoYWN0aW9uLCBhY3Rpb25JZCwgc2Vzc2lvbkRhdGEsIGRlZmF1bHRGdWxmaWxsbWVudHMpIHsKICBpZiAoIUFycmF5LmlzQXJyYXkoZGVmYXVsdEZ1bGZpbGxtZW50cykgfHwgZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KCiAgaWYgKGFjdGlvbiAhPT0gIm9uX3N0YXR1cyIpIHJldHVybiBkZWZhdWx0RnVsZmlsbG1lbnRzOwoKICBjb25zdCBmdWxmaWxsbWVudHMgPSBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cykgPyBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgOiBbXTsKICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMpID8gc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyA6IG51bGw7CgogIGlmICghZmluYWxGdWxmaWxsbWVudHMpIHsKICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogNjAgKiAxMDAwKTsKICAgIGNvbnN0IHN0YXJ0X2VuZCA9IG5ldyBEYXRlKHRpbWUuZ2V0VGltZSgpICsgMTAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCk7CgogICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMubWFwKGYgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGFydDogeyAuLi5mLnN0YXJ0LCB0aW1lOiB7IHJhbmdlOiB7IHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksIGVuZDogc3RhcnRfZW5kIH0gfSB9LAogICAgICAgICAgZW5kOiB7IC4uLmYuZW5kLCB0aW1lOiB7IHJhbmdlOiB7IHN0YXJ0OiBzdGFydF9lbmQsIGVuZDogbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikpLnRvSVNPU3RyaW5nKCkgfSB9IH0sCiAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgIHsgY29kZTogInJvdXRpbmciLCBsaXN0OiBbeyBjb2RlOiAidHlwZSIsIHZhbHVlOiAiUDJIMlAiIH1dIH0sCiAgICAgICAgICAgIHsgY29kZTogInRyYWNraW5nIiwgbGlzdDogW3sgY29kZTogImdwc19lbmFibGVkIiwgdmFsdWU6ICJubyIgfSwgeyBjb2RlOiAidXJsX2VuYWJsZWQiLCB2YWx1ZTogInllcyIgfSwgeyBjb2RlOiAidXJsIiwgdmFsdWU6ICJodHRwczovL3NlbGxlck5QLmNvbS9vbmRjL3RyYWNraW5nX3VybCIgfV0gfQogICAgICAgICAgXQogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICB9CgogIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICBzd2l0Y2ggKGFjdGlvbklkKSB7CiAgICBjYXNlICJvbl9zdGF0dXNfcGFja2VkIjogc3RhdGUgPSAiUGFja2VkIjsgYnJlYWs7CiAgICBjYXNlICJvbl9zdGF0dXNfYWNjZXB0ZWQiOiBzdGF0ZSA9ICJQZW5kaW5nIjsgYnJlYWs7CiAgICBjYXNlICJvbl9zdGF0dXNfYWdlbnRfYXNzaWduZWQiOgogICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CiAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKGYgPT4gZi50eXBlID09PSAiRGVsaXZlcnkiID8geyAuLi5mLCBhZ2VudDogeyBuYW1lOiAibW9jay1hZ2VudCIsIHBob25lOiAiOTg4NjA5ODg2MCIgfSB9IDogZik7CiAgICAgIGJyZWFrOwogICAgY2FzZSAib25fc3RhdHVzX3BpY2tlZCI6CiAgICAgIHN0YXRlID0gIk9yZGVyLXBpY2tlZC11cCI7CiAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKGYgPT4gZi50eXBlID09PSAiRGVsaXZlcnkiID8geyAuLi5mLCBzdGFydDogeyAuLi5mLnN0YXJ0LCB0aW1lOiB7IC4uLmYuc3RhcnQ/LnRpbWUsIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0gfSB9IDogZik7CiAgICAgIGJyZWFrOwogICAgY2FzZSAib25fc3RhdHVzX291dF9mb3JfZGVsaXZlcnkiOiBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsgYnJlYWs7CiAgICBjYXNlICJvbl9zdGF0dXNfb3JkZXJfZGVsaXZlcmVkIjoKICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoZiA9PiBmLnR5cGUgPT09ICJEZWxpdmVyeSIgPyB7IC4uLmYsIGVuZDogeyAuLi5mLmVuZCwgdGltZTogeyAuLi5mLmVuZD8udGltZSwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSB9IH0gOiBmKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgIHN0YXRlID0gIkNhbmNlbGxlZCI7CiAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKGYgPT4gewogICAgICAgIGlmIChmLnR5cGUgPT09ICJSVE8iKSByZXR1cm4geyAuLi5mLCBlbmQ6IHsgLi4uZi5lbmQsIHRpbWU6IHsgLi4uZi5lbmQ/LnRpbWUsIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0gfSwgc3RhdGU6IHsgZGVzY3JpcHRvcjogeyBjb2RlOiAiUlRPLURlbGl2ZXJlZCIgfSB9IH07CiAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgcmV0dXJuIHsgLi4uZiwgc3RhdGU6IHsgZGVzY3JpcHRvcjogeyBjb2RlOiAiQ2FuY2VsbGVkIiB9IH0gfTsKICAgICAgICByZXR1cm4gZjsKICAgICAgfSk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAib25fc3RhdHVzX3JlYWR5X3RvX3NoaXAiOgogICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcChmID0+IGYudHlwZSA9PT0gIkJ1eWVyLURlbGl2ZXJ5IiA/IHsgLi4uZiwgdGFnczogWy4uLihmLnRhZ3MgfHwgW10pLCB7IGNvZGU6ICJzdGF0ZSIsIGxpc3Q6IFt7IGNvZGU6ICJyZWFkeV90b19zaGlwIiwgdmFsdWU6ICJ5ZXMiIH1dIH0sIHsgY29kZTogInJvdXRpbmciLCBsaXN0OiBbeyBjb2RlOiAidHlwZSIsIHZhbHVlOiAiUDJQIiB9XSB9XSB9IDogZik7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDogYnJlYWs7CiAgfQoKICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcChmID0+IGYudHlwZSA9PT0gIkRlbGl2ZXJ5IiA/IHsgLi4uZiwgc3RhdGU6IHsgZGVzY3JpcHRvcjogeyBjb2RlOiBzdGF0ZSB9IH0gfSA6IGYpOwogIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKfQoKYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKSB7CiAgaWYgKCFBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cykpIHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyA9IFtdOwoKICBjb25zdCBnZW5lcmFsUGF5bG9hZCA9IGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpOwoKICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKICAgICJvbl9zdGF0dXMiLAogICAgIm9uX3N0YXR1c19vcmRlcl9kZWxpdmVyZWQiLAogICAgc2Vzc2lvbkRhdGEsCiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyB8fCBbXQogICk7CgogIC8vIFJlc3RvcmUgY3VzdG9tZXIgaWYgbWlzc2luZwogIGNvbnN0IGZpcnN0U2F2ZWQgPSBzZXNzaW9uRGF0YS5zYXZlZF9mdWxmaWxsbWVudHM/LlswXTsKICBpZiAoZmlyc3RTYXZlZD8uY3VzdG9tZXIgJiYgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHM/Lmxlbmd0aCkgewogICAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uY3VzdG9tZXIgPSBmaXJzdFNhdmVkLmN1c3RvbWVyOwogIH0KCiAgLy8gUmVzdG9yZSBpdGVtcyBpZiBtaXNzaW5nCiAgaWYgKCFBcnJheS5pc0FycmF5KGdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMpIHx8ICFnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zLmxlbmd0aCkgewogICAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zPy5tYXAoaXRlbSA9PiAoewogICAgICBpZDogaXRlbS5pZCwKICAgICAgLi4uKGl0ZW0uZnVsZmlsbG1lbnRfaWQgPyB7IGZ1bGZpbGxtZW50X2lkOiBpdGVtLmZ1bGZpbGxtZW50X2lkIH0gOiB7fSksCiAgICAgIC4uLihpdGVtLnF1YW50aXR5ID8geyBxdWFudGl0eTogaXRlbS5xdWFudGl0eSB9IDoge30pLAogICAgICAuLi4oaXRlbS5sb2NhdGlvbl9pZCA/IHsgbG9jYXRpb25faWQ6IGl0ZW0ubG9jYXRpb25faWQgfSA6IHt9KSwKICAgIH0pKSB8fCBbXTsKICB9CgogIHJldHVybiBnZW5lcmFsUGF5bG9hZDsKfQ==
      validate: LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RETeB2B
          action: on_status
          timestamp: 2025-12-29T11:15:59.263Z
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: "*"
          core_version: 1.2.5
        message:
          order:
            id: O1
            state: Completed
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: "400053"
                locality: my street name
                name: my house or door or floor
              phone: "9898989898"
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: 2024-12-23T07:01:43.145Z
              updated_at: 2024-12-23T07:01:43.145Z
            fulfillments:
              - id: F1
                "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Order-delivered
                type: Delivery
                tracking: true
                "@ondc/org/TAT": PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:03:32.230Z
                      end: 2024-12-23T07:08:32.230Z
                    timestamp: 2024-12-23T07:25:32.230Z
                  contact:
                    phone: "9594663710"
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: "9898989898"
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: "400053"
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: 2024-12-23T07:33:32.230Z
                      end: 2024-12-23T07:04:32.230Z
                    timestamp: 2024-12-23T07:45:32.230Z
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: yes
                      - code: url_enabled
                        value: no
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: "100.00"
              breakup:
                - "@ondc/org/item_id": I1
                  "@ondc/org/item_quantity":
                    count: 1
                  title: Plain Atta
                  "@ondc/org/title_type": item
                  price:
                    currency: INR
                    value: "100"
                  item:
                    price:
                      currency: INR
                      value: "100.00"
                - "@ondc/org/item_id": I1
                  title: Delivery charges
                  "@ondc/org/title_type": delivery
                  price:
                    currency: INR
                    value: "00.00"
                - "@ondc/org/item_id": I1
                  title: Convenience Fee
                  "@ondc/org/title_type": misc
                  price:
                    currency: INR
                    value: "00.00"
              ttl: P1D
            payment:
              params:
                amount: "100.00"
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              "@ondc/org/buyer_app_finder_fee_type": percent
              "@ondc/org/buyer_app_finder_fee_amount": "3.0"
              "@ondc/org/settlement_details":
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: 2024-12-23T07:03:30.516Z
            updated_at: 2024-12-23T07:45:32.230Z
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
transaction_history:
  - action_id: select
    payload:
      context:
        domain: ONDC:RETeB2B
        action: select
        timestamp: 2026-02-23T15:00:45.777Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: c7938c89-f5f2-4b38-b492-0d1f2fccb208
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              location_id: L1
              quantity:
                count: 1
              fulfillment_id: F1
          offers:
            - id: discp10
          fulfillments:
            - end:
                location:
                  gps: 19.129076,72.825803
                  address:
                    area_code: "400053"
              customer:
                id: CUST-2024-001231
    action: select
    saved_info: {}
  - action_id: on_select
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_select
        timestamp: 2026-02-23T15:00:45.827Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: c7938c89-f5f2-4b38-b492-0d1f2fccb208
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              location_id: L1
              quantity:
                count: 1
              fulfillment_id: F1
          fulfillments:
            - end:
                location:
                  gps: 19.129076,72.825803
                  address:
                    area_code: "400053"
              customer:
                id: CUST-2024-001231
          quote:
            breakup: []
            price:
              currency: INR
              value: "0.00"
            ttl: P1D
    action: on_select
    saved_info: {}
  - action_id: init
    payload:
      context:
        domain: ONDC:RETeB2B
        action: init
        timestamp: 2026-02-23T15:00:45.864Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: fc266a61-f718-45c0-9490-8d874e2e2210
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          offers:
            - id: discp10
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          payment:
            type: ON-FULFILLMENT
            collected_by: BPP
          fulfillments:
            - id: F1
              type: Delivery
              end:
                location:
                  gps: 12.4535,77.9283
                  address:
                    name: Shop No. 12
                    building: Lakshmi Complex
                    locality: MG Road
                    city: Bengaluru
                    state: Karnataka
                    country: IND
                    area_code: "560001"
                contact:
                  phone: "9876543210"
    action: init
    saved_info: {}
  - action_id: on_init
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_init
        timestamp: 2026-02-23T15:00:45.899Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: fc266a61-f718-45c0-9490-8d874e2e2210
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              type: Delivery
              tracking: false
              end:
                location:
                  gps: 12.4535,77.9283
                  address:
                    name: Shop No. 12
                    building: Lakshmi Complex
                    locality: MG Road
                    city: Bengaluru
                    state: Karnataka
                    country: IND
                    area_code: "560001"
                contact:
                  phone: "9876543210"
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            type: ON-ORDER
            collected_by: BPP
            uri: https://snp.com/pg
            status: NOT-PAID
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          tags:
            - code: bpp_terms
              list:
                - code: tax_number
                  value: gst_number_of_sellerNP
                - code: provider_tax_number
                  value: PAN_number_of_provider
            - code: credit
              list:
                - code: credit_limit
                  value: "25000.00"
                - code: valid_till
                  value: 2025-01-08T08:10:30.000Z
    action: on_init
    saved_info: {}
  - action_id: confirm
    payload:
      context:
        domain: ONDC:RETeB2B
        action: confirm
        timestamp: 2026-02-23T15:00:45.937Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: c1f53ee4-25a8-4d6c-bd8e-7df39f93ec2c
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: Created
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              type: Delivery
              "@ondc/org/TAT": P2D
              tracking: false
              end:
                location:
                  gps: 12.4535,77.9283
                  address:
                    name: Shop No. 12
                    building: Lakshmi Complex
                    locality: MG Road
                    city: Bengaluru
                    state: Karnataka
                    country: IND
                    area_code: "560001"
                contact:
                  phone: "9876543210"
                  email: sharma.kirana@email.com
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            uri: https://ondc.transaction.com/payment
            tl_method: http/get
            params:
              currency: INR
              transaction_id: "3937"
              amount: "1150"
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          tags:
            - code: bpp_terms
              list:
                - code: tax_number
                  value: gst_number_of_sellerNP
                - code: provider_tax_number
                  value: PAN_number_of_provider
            - code: bap_terms
              list:
                - code: accept_bpp_terms
                  value: Y
                - code: static_terms
                  value: https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                - code: tax_number
                  value: gst_number_of_buyerNP
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2025-01-08T09:05:00.000Z
    action: confirm
    saved_info: {}
  - action_id: on_confirm
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_confirm
        timestamp: 2026-02-23T15:00:45.988Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: c1f53ee4-25a8-4d6c-bd8e-7df39f93ec2c
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: Accepted
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              "@ondc/org/provider_name": ABC Distributors
              state:
                descriptor:
                  code: Pending
              type: Delivery
              tracking: true
              "@ondc/org/TAT": P2D
              start:
                location:
                  id: L1
                  descriptor:
                    name: ABC Distributors Warehouse
                  gps: 12.9563,77.6368
                  address:
                    locality: Jayanagar
                    city: Bengaluru
                    area_code: "560076"
                    state: KA
                contact:
                  phone: "9876543210"
                  email: warehouse@abcdist.com
              end:
                location:
                  gps: 12.4535,77.9283
                  address:
                    name: Shop No. 12
                    building: Lakshmi Complex
                    locality: MG Road
                    city: Bengaluru
                    state: Karnataka
                    country: IND
                    area_code: "560001"
                contact:
                  phone: "9876543210"
                  email: sharma.kirana@email.com
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            params:
              currency: INR
              amount: "1150.00"
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                beneficiary_name: ABC Distributors
                settlement_type: upi
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          tags:
            - code: bpp_terms
              list:
                - code: np_type
                  value: MSN
                - code: tax_number
                  value: gst_number_of_sellerNP
                - code: provider_tax_number
                  value: PAN_number_of_provider
                - code: accept_bap_terms
                  value: Y
            - code: bap_terms
              list:
                - code: static_terms
                  value: https://github.com/ONDC-Official/protocol-network-extension/discussions/79
                - code: tax_number
                  value: gst_number_of_buyerNP
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2025-01-08T09:06:30.000Z
    action: on_confirm
    saved_info: {}
  - action_id: on_status_accepted
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_status
        timestamp: 2026-02-23T15:00:46.046Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 655adf13-1973-4bab-8dde-d352f2af2e53
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: Accepted
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
              state:
                descriptor:
                  code: Pending
              type: Delivery
              tracking: true
              "@ondc/org/TAT": PT60M
              start:
                location:
                  id: L1
                  descriptor:
                    name: ABC Store
                  gps: 19.129076,72.825803
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:10:46.054Z
                    end: 2026-02-23T15:20:46.054Z
                contact:
                  phone: "9594663710"
                  email: nobody@nomail.com
              end:
                person:
                  name: John Doe
                contact:
                  email: nobody@nomail.com
                  phone: "9898989898"
                location:
                  gps: 19.131140,72.834091
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:20:46.054Z
                    end: 2026-02-23T16:10:46.054Z
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: no
                    - code: url_enabled
                      value: yes
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            uri: https://ondc.transaction.com/payment
            tl_method: http/get
            params:
              currency: INR
              transaction_id: "3937"
              amount: "1150"
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2026-02-23T15:00:46.054Z
    action: on_status
    saved_info: {}
  - action_id: on_status_packed
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_status
        timestamp: 2026-02-23T15:00:46.091Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 62751403-3284-4bd9-af36-527929b410e7
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: In-progress
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
              state:
                descriptor:
                  code: Packed
              type: Delivery
              tracking: true
              "@ondc/org/TAT": PT60M
              start:
                location:
                  id: L1
                  descriptor:
                    name: ABC Store
                  gps: 19.129076,72.825803
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:10:46.095Z
                    end: 2026-02-23T15:20:46.095Z
                contact:
                  phone: "9594663710"
                  email: nobody@nomail.com
              end:
                person:
                  name: John Doe
                contact:
                  email: nobody@nomail.com
                  phone: "9898989898"
                location:
                  gps: 19.131140,72.834091
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:20:46.095Z
                    end: 2026-02-23T16:10:46.095Z
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: no
                    - code: url_enabled
                      value: yes
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            uri: https://ondc.transaction.com/payment
            tl_method: http/get
            params:
              currency: INR
              transaction_id: "3937"
              amount: "1150"
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2026-02-23T15:00:46.095Z
    action: on_status
    saved_info: {}
  - action_id: on_status_agent_assigned
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_status
        timestamp: 2026-02-23T15:00:46.132Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 8d0d00ad-8a04-4774-9f6e-727338560348
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: In-progress
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          offers:
            - id: discp10
          fulfillments:
            - id: F1
              "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
              state:
                descriptor:
                  code: Agent-assigned
              type: Delivery
              tracking: true
              "@ondc/org/TAT": PT60M
              start:
                location:
                  id: L1
                  descriptor:
                    name: ABC Store
                  gps: 19.129076,72.825803
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:10:46.095Z
                    end: 2026-02-23T15:20:46.095Z
                contact:
                  phone: "9594663710"
                  email: nobody@nomail.com
              end:
                person:
                  name: John Doe
                contact:
                  email: nobody@nomail.com
                  phone: "9898989898"
                location:
                  gps: 19.131140,72.834091
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:20:46.095Z
                    end: 2026-02-23T16:10:46.095Z
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: no
                    - code: url_enabled
                      value: yes
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: "9886098860"
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            uri: https://ondc.transaction.com/payment
            tl_method: http/get
            params:
              currency: INR
              transaction_id: "3937"
              amount: "1150"
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2026-02-23T15:00:46.136Z
    action: on_status
    saved_info: {}
  - action_id: on_status_picked
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_status
        timestamp: 2026-02-23T15:00:46.173Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 45c5fba1-fb8f-4041-bc88-a765ad955338
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: In-progress
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
              state:
                descriptor:
                  code: Order-picked-up
              type: Delivery
              tracking: true
              "@ondc/org/TAT": PT60M
              start:
                location:
                  id: L1
                  descriptor:
                    name: ABC Store
                  gps: 19.129076,72.825803
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:10:46.095Z
                    end: 2026-02-23T15:20:46.095Z
                  timestamp: 2026-02-23T15:00:46.177Z
                contact:
                  phone: "9594663710"
                  email: nobody@nomail.com
              end:
                person:
                  name: John Doe
                contact:
                  email: nobody@nomail.com
                  phone: "9898989898"
                location:
                  gps: 19.131140,72.834091
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:20:46.095Z
                    end: 2026-02-23T16:10:46.095Z
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: no
                    - code: url_enabled
                      value: yes
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: "9886098860"
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            uri: https://ondc.transaction.com/payment
            tl_method: http/get
            params:
              currency: INR
              transaction_id: "3937"
              amount: "1150"
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          documents:
            - url: https://invoice_url
              label: Invoice
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2026-02-23T15:00:46.177Z
    action: on_status
    saved_info: {}
  - action_id: track
    payload:
      context:
        domain: ONDC:RETeB2B
        action: track
        timestamp: 2026-02-23T15:00:46.214Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 676fcec1-81d1-4cb2-a014-70a11c014e0b
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order_id: O1
    action: track
    saved_info: {}
  - action_id: on_track
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_track
        timestamp: 2026-02-23T15:00:46.266Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 45c5fba1-fb8f-4041-bc88-a765ad955338
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        tracking:
          id: F1
          url: https://MockNP.com/ondc/tracking_url
          status: active
    action: on_track
    saved_info: {}
  - action_id: on_status_out_for_delivery
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_status
        timestamp: 2026-02-23T15:00:46.328Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 1751e0d0-9061-4417-8ad6-a35c902ce699
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: In-progress
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
              state:
                descriptor:
                  code: Out-for-delivery
              type: Delivery
              tracking: true
              "@ondc/org/TAT": PT60M
              start:
                location:
                  id: L1
                  descriptor:
                    name: ABC Store
                  gps: 19.129076,72.825803
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:10:46.095Z
                    end: 2026-02-23T15:20:46.095Z
                contact:
                  phone: "9594663710"
                  email: nobody@nomail.com
              end:
                person:
                  name: John Doe
                contact:
                  email: nobody@nomail.com
                  phone: "9898989898"
                location:
                  gps: 19.131140,72.834091
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:20:46.095Z
                    end: 2026-02-23T16:10:46.095Z
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: no
                    - code: url_enabled
                      value: yes
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: "9886098860"
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            uri: https://ondc.transaction.com/payment
            tl_method: http/get
            params:
              currency: INR
              transaction_id: "3937"
              amount: "1150"
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          documents:
            - url: https://invoice_url
              label: Invoice
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2026-02-23T15:00:46.334Z
    action: on_status
    saved_info: {}
  - action_id: on_status_order_delivered
    payload:
      context:
        domain: ONDC:RETeB2B
        action: on_status
        timestamp: 2026-02-23T15:00:46.364Z
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 5d40391e-7767-42bf-99f7-bb350d59f844
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: "*"
        core_version: 1.2.5
      message:
        order:
          id: O1
          state: Completed
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            name: Sharma Kirana Store
            address:
              name: Shop No. 12
              building: Lakshmi Complex
              locality: MG Road
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: "560001"
            tax_number: 29AABCU9603R1ZM
            email: sharma.kirana@email.com
            phone: "9876543210"
            created_at: 2025-01-08T09:00:00.000Z
            updated_at: 2025-01-08T09:00:00.000Z
          fulfillments:
            - id: F1
              "@ondc/org/provider_name": 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
              state:
                descriptor:
                  code: Order-delivered
              type: Delivery
              tracking: true
              "@ondc/org/TAT": PT60M
              start:
                location:
                  id: L1
                  descriptor:
                    name: ABC Store
                  gps: 19.129076,72.825803
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:10:46.095Z
                    end: 2026-02-23T15:20:46.095Z
                contact:
                  phone: "9594663710"
                  email: nobody@nomail.com
              end:
                person:
                  name: John Doe
                contact:
                  email: nobody@nomail.com
                  phone: "9898989898"
                location:
                  gps: 19.131140,72.834091
                  address:
                    building: my building name or house
                    city: Mumbai
                    state: Maharashtra
                    country: IND
                    area_code: "400053"
                    locality: my street name
                    name: my house or door or floor
                time:
                  range:
                    start: 2026-02-23T15:20:46.095Z
                    end: 2026-02-23T16:10:46.095Z
                  timestamp: 2026-02-23T15:00:46.376Z
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: no
                    - code: url_enabled
                      value: yes
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: "9886098860"
          quote:
            price:
              currency: INR
              value: "1150.00"
            breakup:
              - "@ondc/org/item_id": I1
                "@ondc/org/item_quantity":
                  count: 20
                title: Ashirwad Plain Atta 1kg
                "@ondc/org/title_type": item
                price:
                  currency: INR
                  value: "1040.00"
                item:
                  price:
                    currency: INR
                    value: "52.00"
              - "@ondc/org/item_id": F1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "10.00"
                item:
                  tags:
                    - code: quote
                      list:
                        - code: type
                          value: fulfillment
              - "@ondc/org/item_id": F1
                title: Delivery charges
                "@ondc/org/title_type": delivery
                price:
                  currency: INR
                  value: "100.00"
              - "@ondc/org/item_id": I1
                title: Tax
                "@ondc/org/title_type": tax
                price:
                  currency: INR
                  value: "0.00"
            ttl: P1D
          payment:
            uri: https://ondc.transaction.com/payment
            tl_method: http/get
            params:
              currency: INR
              transaction_id: "3937"
              amount: "1150"
            status: NOT-PAID
            type: ON-FULFILLMENT
            collected_by: BPP
            "@ondc/org/buyer_app_finder_fee_type": percent
            "@ondc/org/buyer_app_finder_fee_amount": "3.54"
            "@ondc/org/settlement_basis": delivery
            "@ondc/org/settlement_window": P1D
            "@ondc/org/withholding_amount": "0.00"
            "@ondc/org/settlement_details":
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: upi
                beneficiary_name: ABC Distributors
                upi_address: abcdist@oksbi
                settlement_bank_account_no: XXXXXXXXXX
                settlement_ifsc_code: XXXXXXXXX
                bank_name: State Bank of India
                branch_name: Jayanagar Branch
          documents:
            - url: https://invoice_url
              label: Invoice
          created_at: 2025-01-08T09:05:00.000Z
          updated_at: 2026-02-23T15:00:46.376Z
    action: on_status
    saved_info: {}
validationLib: ""
helperLib: ""
