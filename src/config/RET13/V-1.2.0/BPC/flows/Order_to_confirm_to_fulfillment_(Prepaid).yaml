meta:
  domain: ONDC:RET13
  version: 1.2.0
  flowId: Order_to_confirm_to_fulfillment_(Prepaid)
transaction_data:
  transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
  latest_timestamp: '1970-01-01T00:00:00.000Z'
  bap_id: sample-bap-id
  bap_uri: https://bap.example.com
  bpp_id: sample-bpp-id
  bpp_uri: https://bpp.example.com
steps:
  - api: select
    action_id: select
    owner: BAP
    responseFor: null
    unsolicited: false
    description: First Select where items are selected
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKCWNvbnN0IGlucHV0cyA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzOwoJaWYgKCFpbnB1dHMpIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKCWlmIChpbnB1dHMucHJvdmlkZXIpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmlkID0gaW5wdXRzLnByb3ZpZGVyOwoJfQoJaWYgKGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbiAmJiBBcnJheS5pc0FycmF5KGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbikpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmxvY2F0aW9ucyA9CgkJCWlucHV0cy5wcm92aWRlcl9sb2NhdGlvbi5tYXAoKGxvY2F0aW9uKSA9PiB7CgkJCQlyZXR1cm4gewoJCQkJCWlkOiBsb2NhdGlvbiwKCQkJCX07CgkJCX0pOwoJfSBlbHNlIGlmICgKCQlpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24gJiYKCQl0eXBlb2YgaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uID09PSAic3RyaW5nIgoJKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlci5sb2NhdGlvbnMgPSBbCgkJCXsKCQkJCWlkOiBpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24sCgkJCX0sCgkJXTsKCX0KCWlmIChpbnB1dHMubG9jYXRpb25fZ3BzKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uZW5kLmxvY2F0aW9uLmdwcyA9CgkJCWlucHV0cy5sb2NhdGlvbl9ncHM7Cgl9CglpZiAoaW5wdXRzLmxvY2F0aW9uX3Bpbl9jb2RlKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uZW5kLmxvY2F0aW9uLmFkZHJlc3MuYXJlYV9jb2RlID0KCQkJaW5wdXRzLmxvY2F0aW9uX3Bpbl9jb2RlOwoJCWRlZmF1bHRQYXlsb2FkLmNvbnRleHQuY2l0eSA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzLmNpdHlfY29kZTsKCX0KCWlmIChpbnB1dHMuaXRlbXMpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gaW5wdXRzLml0ZW1zLm1hcCgoaXRlbSkgPT4gewoJCQlyZXR1cm4gewoJCQkJaWQ6IGl0ZW0uaXRlbUlkLAoJCQkJcXVhbnRpdHk6IHsKCQkJCQljb3VudDogaXRlbS5xdWFudGl0eSwKCQkJCX0sCgkJCQlsb2NhdGlvbl9pZDogaXRlbS5sb2NhdGlvbiwKCQkJfTsKCQl9KTsKCX0KCWNvbnN0IGlucHV0S2V5cyA9IE9iamVjdC5rZXlzKGlucHV0cyk7Cgljb25zdCBvZmZlcnMgPSBpbnB1dEtleXMuZmlsdGVyKChrKSA9PiBrLnN0YXJ0c1dpdGgoIm9mZmVyc18iKSk7CglpZiAob2ZmZXJzLmxlbmd0aCA+IDApIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLm9mZmVycyA9IG9mZmVycwoJCQkuZmlsdGVyKChvZmZlcikgPT4gaW5wdXRzW29mZmVyXSAhPT0gZmFsc2UgJiYgaW5wdXRzW29mZmVyXSAhPT0gbnVsbCkKCQkJLm1hcCgob2ZmZXIpID0+IHsKCQkJCXJldHVybiB7CgkJCQkJaWQ6IG9mZmVyLnJlcGxhY2UoIm9mZmVyc18iLCAiIiksCgkJCQkJLy8gdGFnczogWwoJCQkJCS8vIAl7CgkJCQkJLy8gCQljb2RlOiAic2VsZWN0aW9uIiwKCQkJCQkvLyAJCWxpc3Q6IFsKCQkJCQkvLyAJCQl7CgkJCQkJLy8gCQkJCWNvZGU6ICJhcHBseSIsCgkJCQkJLy8gCQkJCXZhbHVlOiAieWVzIiwKCQkJCQkvLyAJCQl9LAoJCQkJCS8vIAkJXSwKCQkJCQkvLyAJfSwKCQkJCQkvLyBdLAoJCQkJfTsKCQkJfSk7Cgl9CglyZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: select
          timestamp: '2025-12-29T06:22:03.809Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: befae42f-ac37-41e9-90ae-a33ec945bcf3
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                location_id: L1
            fulfillments:
              - end:
                  location:
                    gps: 12.966545,77.592074
                    address:
                      area_code: '560027'
      saveData:
        bapId: $.context.bap_id
        message_id: $.context.message_id
        selected_items: $.message.order.items[*]
        payload_city: $.context.city
        selected_fulfillments: $.message.order.fulfillments[*]
        selected_offers: $.message.order.offers[*]
        provider: $.message.order.provider
      inputs:
        id: ret10_grocery_select
        jsonSchema:
          $schema: http://json-schema.org/draft-07/schema#
          type: object
          properties:
            city_code:
              type: string
              default: std:011
            provider:
              type: string
              default: P1
            provider_location:
              type: string
              default: L1
            location_gps:
              type: string
              default: 19.129076,72.825803
            location_pin_code:
              type: string
              default: '400053'
            items:
              type: array
              default: []
              items:
                type: object
                properties:
                  itemId:
                    type: string
                    default: I1
                  quantity:
                    type: number
                    default: 1
                  location:
                    type: string
                    default: L1
                additionalProperties: true
                default: {}
          additionalProperties: true
          default: {}
  - api: on_select
    action_id: on_select
    owner: BPP
    responseFor: select
    unsolicited: false
    description: On-select response to select
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBjcmVhdGVRdW90ZSgKCXNlbGVjdGVkSXRlbXMsCglzZXNzaW9uRGF0YSwKCWRlZmF1bHRQYXlsb2FkLAoJZnVsZmlsbG1lbnRzLAoJY2FuY2VsbGVkID0gZmFsc2UKKSB7CgoJbGV0IHRvdGFsUHJpY2UgPSAwOwoJbGV0IHRvdGFsUXVhbnRpdHkgPSAwOwoJbGV0IGl0ZW1TZXQgPSBuZXcgU2V0KCk7CglsZXQgYnJlYWt1cE9iamVjdCA9IFtdOwoJY29uc3QgY2F0YWxvZ0l0ZW1zID0gUkVUMTNCUEMxMjVDYXRhbG9nLmNhdGFsb2dbCgkJImJwcC9wcm92aWRlcnMiCgldWzBdLml0ZW1zLmZpbHRlcigoaSkgPT4gewoJCWNvbnN0IGlkTWFwID0gc2VsZWN0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0uaWQpOwoJCWNvbnNvbGUubG9nKGlkTWFwKTsKCQlyZXR1cm4gaWRNYXAuaW5jbHVkZXMoaS5pZCk7Cgl9KTsKCQoJZm9yIChjb25zdCBzZWxlY3RlZEl0ZW0gb2Ygc2VsZWN0ZWRJdGVtcyA/PyBbXSkgewoJCWNvbnN0IGZ1bGZpbGxtZW50ID0gZnVsZmlsbG1lbnRzLmZpbmQoCgkJCShmKSA9PiBmLmlkID09PSBzZWxlY3RlZEl0ZW0uZnVsZmlsbG1lbnRfaWQKCQkpOwoJCWlmICgKCQkJIWZ1bGZpbGxtZW50IHx8CgkJCSFbIkRlbGl2ZXJ5IiwgIlNlbGYtUGlja3VwIiwgIkJ1eWVyLURlbGl2ZXJ5Il0uaW5jbHVkZXMoCgkJCQlmdWxmaWxsbWVudC50eXBlID8/ICIiCgkJCSkKCQkpIHsKCQkJY29udGludWU7CgkJfQoJCWNvbnN0IGNhdGFsb2dJdGVtID0gY2F0YWxvZ0l0ZW1zLmZpbmQoKGkpID0+IGkuaWQgPT09IHNlbGVjdGVkSXRlbS5pZCk7CgkJaWYgKCFjYXRhbG9nSXRlbSkgY29udGludWU7IC8vIFNraXAgaWYgaXRlbSBub3QgZm91bmQgaW4gY2F0YWxvZwoKCQljb25zdCBxdWFudGl0eSA9IGNhbmNlbGxlZCA/IDAgOiBzZWxlY3RlZEl0ZW0uY291bnQgPz8gMTsKCQljb25zdCBwcmljZSA9IHBhcnNlRmxvYXQoY2F0YWxvZ0l0ZW0ucHJpY2UudmFsdWUpICogcXVhbnRpdHk7CgkJdG90YWxQcmljZSArPSBwcmljZTsKCgkJY29uc3QgYnJlYWt1cENsb25lID0gSlNPTi5wYXJzZSgKCQkJSlNPTi5zdHJpbmdpZnkoYnJlYWt1cEl0ZW0pCgkJKTsKCQlicmVha3VwQ2xvbmVbIkBvbmRjL29yZy9pdGVtX2lkIl0gPSBjYXRhbG9nSXRlbS5pZDsKCQlicmVha3VwQ2xvbmUudGl0bGUgPSBjYXRhbG9nSXRlbS5kZXNjcmlwdG9yLm5hbWU7CgkJYnJlYWt1cENsb25lWyJAb25kYy9vcmcvaXRlbV9xdWFudGl0eSJdLmNvdW50ID0gcXVhbnRpdHk7CgkJYnJlYWt1cENsb25lLnByaWNlLnZhbHVlID0gYCR7cHJpY2UudG9GaXhlZCgyKX1gOwoJCWJyZWFrdXBDbG9uZS5pdGVtLnByaWNlLnZhbHVlID0gY2F0YWxvZ0l0ZW0ucHJpY2UudmFsdWU7CgkJYnJlYWt1cE9iamVjdC5wdXNoKGJyZWFrdXBDbG9uZSk7CgoJCWlmIChzZXNzaW9uRGF0YS5vdXRfb2Zfc3RvY2tfaXRlbV9pZHM/LmluY2x1ZGVzKGNhdGFsb2dJdGVtLmlkKSkgewoJCQlicmVha3VwQ2xvbmUuaXRlbS5xdWFudGl0eS5hdmFpbGFibGUuY291bnQgPSAiMCI7CgkJCWJyZWFrdXBDbG9uZS5pdGVtLnF1YW50aXR5Lm1heGltdW0uY291bnQgPSAiMCI7CgkJCWJyZWFrdXBDbG9uZVsiQG9uZGMvb3JnL3RpdGxlX3R5cGUiXSA9ICJpdGVtIjsKCQkJZGVmYXVsdFBheWxvYWQuZXJyb3IgPSB7CgkJCQl0eXBlOiAiRE9NQUlOLUVSUk9SIiwKCQkJCWNvZGU6ICI0MDAwMiIsCgkJCQltZXNzYWdlOiBgSXRlbSB3aXRoIGlkOiAke2NhdGFsb2dJdGVtLmlkfSBpcyBvdXQgb2Ygc3RvY2tgLAoJCQl9OwoJCX0gZWxzZSB7CgkJCXRvdGFsUXVhbnRpdHkgKz0gc2VsZWN0ZWRJdGVtLmNvdW50ID8/IDA7CgkJCWlmIChxdWFudGl0eSA+IDApIGl0ZW1TZXQuYWRkKGNhdGFsb2dJdGVtLmlkKTsKCQl9CgoJCWlmIChzZXNzaW9uRGF0YS5zZWFyY2hfYmFwX3Rlcm1zPy5saXN0Py5zb21lKHQgPT4gdC5jb2RlID09PSAiMDBBIikpIHsKCQkJZm9yIChjb25zdCBmZWUgb2YgbnBGZWVzYnJlYWt1cCkgewoJCQkJY29uc3QgZmVlQ2xvbmUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZlZSkpOwoJCQkJZmVlQ2xvbmVbIkBvbmRjL29yZy9pdGVtX2lkIl0gPSBjYXRhbG9nSXRlbS5pZDsKCQkJCWJyZWFrdXBPYmplY3QucHVzaChmZWVDbG9uZSk7CgkJCQl0b3RhbFByaWNlICs9IHBhcnNlRmxvYXQoZmVlQ2xvbmUucHJpY2UudmFsdWUgPz8gIjAiKTsKCQkJfQoJCX0KCX0KCglicmVha3VwT2JqZWN0LnB1c2goYnJlYWt1cFswXSk7CglicmVha3VwT2JqZWN0LnB1c2goYnJlYWt1cFsxXSk7CglpZiAoc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfb2ZmZXJzICYmIHNlc3Npb25EYXRhLnNlbGVjdGVkX29mZmVycy5sZW5ndGggPiAwKSB7CgkJbGV0IG9mZmVyUXVvdGUgPQoJCQlvZmZlclF1b3Rlc1sKCQkJCXNlc3Npb25EYXRhLnNlbGVjdGVkX29mZmVyc1swXS5pZAoJCQldOwoKCQljb25zdCBvZmZlcklkID0gc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfb2ZmZXJzWzBdLmlkOwoKCQlpZiAob2ZmZXJJZCA9PT0gIkZMQVQ1MCIgJiYgdG90YWxRdWFudGl0eSA+IDApIHsKCQkJYnJlYWt1cE9iamVjdC5wdXNoKG9mZmVyUXVvdGUpOwoJCQlsZXQgb2ZmZXJQcmljZSA9IHBhcnNlRmxvYXQob2ZmZXJRdW90ZS5wcmljZS52YWx1ZSk7CgkJCWlmIChjYW5jZWxsZWQpIG9mZmVyUHJpY2UgPSAwOwoJCQl0b3RhbFByaWNlICs9IG9mZmVyUHJpY2U7CgkJfSBlbHNlIGlmIChvZmZlcklkID09PSAiY29tYm8xIiAmJiBpdGVtU2V0LnNpemUgPj0gMykgewoJCQlicmVha3VwT2JqZWN0LnB1c2gob2ZmZXJRdW90ZSk7CgkJCWxldCBvZmZlclByaWNlID0gcGFyc2VGbG9hdChvZmZlclF1b3RlLnByaWNlLnZhbHVlKTsKCQkJaWYgKGNhbmNlbGxlZCkgb2ZmZXJQcmljZSA9IDA7CgkJCXRvdGFsUHJpY2UgKz0gb2ZmZXJQcmljZTsKCQl9IGVsc2UgaWYgKAoJCQlvZmZlcklkID09PSAiYnV5MmdldDMiICYmCgkJCXRvdGFsUXVhbnRpdHkgPj0gMiAmJgoJCQkhc2Vzc2lvbkRhdGEub3V0X29mX3N0b2NrX2l0ZW1faWRzPy5pbmNsdWRlcygiSTIiKQoJCSkgewoJCQlpZiAoY2FuY2VsbGVkKSB7CgkJCQkvL0B0cy1pZ25vcmUKCQkJCW9mZmVyUXVvdGVbIkBvbmRjL29yZy9pdGVtX3F1YW50aXR5Il0gPSB7CgkJCQkJY291bnQ6IDAsCgkJCQl9OwoJCQl9CgkJCWJyZWFrdXBPYmplY3QucHVzaChvZmZlclF1b3RlKTsKCQl9Cgl9CglyZXR1cm4gewoJCWJyZWFrdXA6IGJyZWFrdXBPYmplY3QsCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogYCR7dG90YWxQcmljZS50b0ZpeGVkKDIpfWAsCgkJfSwKCQl0dGw6ICJQMUQiLAoJfTsKfQoKY29uc3QgYnJlYWt1cEl0ZW0gPSB7CiAgIkBvbmRjL29yZy9pdGVtX2lkIjogIkkxIiwKICAiQG9uZGMvb3JnL2l0ZW1fcXVhbnRpdHkiOiB7CiAgICBjb3VudDogMSwKICB9LAogIHRpdGxlOiAiQnV0dGVyZmx5IEJlYXV0aWZ1bCAxMyBHb2xkIE5lY2tsYWNlIiwKICAiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAiaXRlbSIsCiAgcHJpY2U6IHsKICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgIHZhbHVlOiAiMjI2MC4wMCIsCiAgfSwKICBpdGVtOiB7CiAgICBxdWFudGl0eTogewogICAgICBhdmFpbGFibGU6IHsKICAgICAgICBjb3VudDogIjk5IiwKICAgICAgfSwKICAgICAgbWF4aW11bTogewogICAgICAgIGNvdW50OiAiMTAiLAogICAgICB9LAogICAgfSwKICAgIHByaWNlOiB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdmFsdWU6ICIyMjYwLjAwIiwKICAgIH0sCiAgfSwKfTsKCmNvbnN0IGJyZWFrdXAgPSBbCiAgewogICAgIkBvbmRjL29yZy9pdGVtX2lkIjogIkYxIiwKICAgIHRpdGxlOiAiRGVsaXZlcnkgY2hhcmdlcyIsCiAgICAiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAiZGVsaXZlcnkiLAogICAgcHJpY2U6IHsKICAgICAgY3VycmVuY3k6ICJJTlIiLAogICAgICB2YWx1ZTogIjQ5My43NSIsCiAgICB9LAogIH0sCiAgewogICAgIkBvbmRjL29yZy9pdGVtX2lkIjogIkYxIiwKICAgIHRpdGxlOiAiQ29udmVuaWVuY2UgRmVlIiwKICAgICJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJtaXNjIiwKICAgIHByaWNlOiB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdmFsdWU6ICIzLjAwIiwKICAgIH0sCiAgfSwKXTsKCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAogIGRlZmF1bHRQYXlsb2FkLAogIHNlc3Npb25EYXRhCikgewogIGNvbnN0IHNlbGVjdGVkSXRlbXNPYmogPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtczsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2VsZWN0ZWRJdGVtc09iai5tYXAoKGl0ZW0pID0+IHsKICAgIHJldHVybiB7CiAgICAgIGlkOiBpdGVtLmlkLAogICAgICBmdWxmaWxsbWVudF9pZDogIkYxIiwKICAgIH07CiAgfSk7CiAgY29uc3QgcXVvdGUgPSBjcmVhdGVRdW90ZSgKICAgIHNlbGVjdGVkSXRlbXNPYmoubWFwKChpdGVtKSA9PiB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgY291bnQ6IGl0ZW0ucXVhbnRpdHkuY291bnQsCiAgICAgICAgZnVsZmlsbG1lbnRfaWQ6ICJGMSIsCiAgICAgIH07CiAgICB9KSwKICAgIHNlc3Npb25EYXRhLAogICAgZGVmYXVsdFBheWxvYWQsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwogICk7CglkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gcXVvdGU7CiAgZGVmYXVsdFBheWxvYWQuY29udGV4dC5tZXNzYWdlX2lkPXNlc3Npb25EYXRhLm1lc3NhZ2VfaWRbMF0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0K
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        ZnVuY3Rpb24gbWVldFJlcXVpcmVtZW50cyhzZXNzaW9uRGF0YSl7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZXMgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_select
          timestamp: '2025-12-29T06:44:41.277Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 001f9ecd-fbe0-43da-987e-6db9f5003db6
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            fulfillments:
              - id: F1
                type: Delivery
                '@ondc/org/provider_name': LSP or Provider Name
                tracking: true
                '@ondc/org/category': Standard Delivery
                '@ondc/org/TAT': P3D
                state:
                  descriptor:
                    code: Serviceable
            quote:
              price:
                value: '2756.75'
                currency: INR
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Butterfly Beautiful 13 Gold Necklace
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '2260.00'
                  item:
                    quantity:
                      available:
                        count: '99'
                      maximum:
                        count: '10'
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '493.75'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '3.00'
              ttl: P1D
            items:
              - id: I1
                fulfillment_id: F1
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        on_select_fulfillments: $.message.order.fulfillments[*]
        on_select_items: $.message.order.items[*]
        tat: $.message.order.fulfillments[0]["@ondc/org/TAT"]
      inputs: {}
  - api: init
    action_id: init
    owner: BAP
    responseFor: null
    unsolicited: false
    description: 'Init '
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewogIGlmIChpbml0aWFsaXplKSB7CiAgICBjb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwogICAgc2F2ZWRCaWxsaW5nLmNyZWF0ZWRfYXQgPSBuZXdJc287CiAgICBzYXZlZEJpbGxpbmcudXBkYXRlZF9hdCA9IG5ld0lzbzsKICB9CiAgcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgc2Vzc2lvbkRhdGEsCiAgZGVmYXVsdEZ1bGZpbGxtZW50cwopIHsKICBpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KICBjb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50cyA9CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwogICAgY29uc3Qgc2VsZWN0ZWQgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHM7CiAgICBjb25zdCBkZWZhdWx0RW5kID0gewogICAgICBlbmQ6IHsKICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICBlbWFpbDogIm5vYm9keUBub21haWwuY29tIiwKICAgICAgICAgIHBob25lOiAiOTg5ODk4OTg5OCIsCiAgICAgICAgfSwKICAgICAgICBsb2NhdGlvbjogewogICAgICAgICAgZ3BzOiBzZWxlY3RlZFswXS5lbmQ/LmxvY2F0aW9uPy5ncHMsCiAgICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICAgIGJ1aWxkaW5nOiAibW9jay1idWlsZGluZyIsCiAgICAgICAgICAgIGNpdHk6ICJtb2NrLWNpdHkiLAogICAgICAgICAgICBzdGF0ZTogIm1vY2stc3RhdGUiLAogICAgICAgICAgICBjb3VudHJ5OiAiSU5EIiwKICAgICAgICAgICAgYXJlYV9jb2RlOgogICAgICAgICAgICAgIHNlbGVjdGVkWzBdLmVuZD8ubG9jYXRpb24/LmFkZHJlc3M/LmFyZWFfY29kZSB8fCAiNDAwMDUzIiwKICAgICAgICAgICAgbG9jYWxpdHk6ICJtb2NrLWxvY2FsaXR5IiwKICAgICAgICAgICAgbmFtZTogIm1vY2staG91c2UtbmFtZSIsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICB9OwoKICAgIGxldCB0YXJnZXRGdWxmaWxsbWVudCA9IHt9OwogICAgICB0YXJnZXRGdWxmaWxsbWVudCA9IG9uU2VsZWN0RnVsZmlsbG1lbnRzLmZpbmQoCiAgICAgICAgKGYpID0+IGYudHlwZSA9PT0gIkRlbGl2ZXJ5IgogICAgICApOwoKICAgIGNvbnN0IGluaXRGdWxmaWxsbWVudHMgPSBbCiAgICAgIHsKICAgICAgICBpZDogdGFyZ2V0RnVsZmlsbG1lbnQ/LmlkIHx8ICJGMyIsCiAgICAgICAgdHlwZTogdGFyZ2V0RnVsZmlsbG1lbnQ/LnR5cGUgfHwgIkRlbGl2ZXJ5IiwKICAgICAgICBlbmQ6IGRlZmF1bHRFbmQuZW5kLAogICAgICB9LAogICAgXTsKCiAgICByZXR1cm4gaW5pdEZ1bGZpbGxtZW50czsKfQphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBpdGVtcyA9IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zOwoJY29uc3Qgb25TZWxlY3REYXRhID0gc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50czsKCWNvbnN0IGZJZCA9IG9uU2VsZWN0RGF0YS5maW5kKChmKSA9PiBmLnR5cGUgPT09ICJEZWxpdmVyeSIpPy5pZCB8fCAiRjEiOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gaXRlbXMubWFwKChpdGVtKSA9PiB7CgkJcmV0dXJuIHsKCQkJaWQ6IGl0ZW0uaWQsCgkJCWZ1bGZpbGxtZW50X2lkOiBmSWQsCgkJCXF1YW50aXR5OiB7CgkJCQljb3VudDogaXRlbS5xdWFudGl0eS5jb3VudCwKCQkJfSwKCQkJbG9jYXRpb25faWQ6IGl0ZW0ubG9jYXRpb25faWQsCgkJfTsKCX0pOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZyA9IGdldFVwZGF0ZWRCaWxsaW5nKAoJCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZywKCQl0cnVlCgkpOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAoJCXNlc3Npb25EYXRhLAogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKCSk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwoJaWYgKHNlc3Npb25EYXRhLnNlbGVjdGVkX29mZmVycykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5vZmZlcnMgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9vZmZlcnMubWFwKAoJCQkob2ZmZXIpID0+IHsKCQkJCXJldHVybiB7CgkJCQkJaWQ6IG9mZmVyLmlkLAoJCQkJCXRhZ3M6IFsKCQkJCQkJewoJCQkJCQkJY29kZTogInNlbGVjdGlvbiIsCgkJCQkJCQlsaXN0OiBbCgkJCQkJCQkJewoJCQkJCQkJCQljb2RlOiAiYXBwbHkiLAoJCQkJCQkJCQl2YWx1ZTogInllcyIsCgkJCQkJCQkJfSwKCQkJCQkJCV0sCgkJCQkJCX0sCgkJCQkJXSwKCQkJCX07CgkJCX0KCQkpOwogIH0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpewogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9pdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMgfHwgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcGF5bG9hZF9jaXR5CiAgaWYgKCFzZXNzaW9uRGF0YS5wYXlsb2FkX2NpdHkpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwYXlsb2FkX2NpdHkgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWUxPQURfQ0lUWSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHByb3ZpZGVyCiAgaWYgKCFzZXNzaW9uRGF0YS5wcm92aWRlcikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHByb3ZpZGVyIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QUk9WSURFUiIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHF1b3RlCiAgaWYgKCFzZXNzaW9uRGF0YS5xdW90ZSB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEucXVvdGUgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcXVvdGUgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1FVT1RFIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfaXRlbXMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciB0YXQKICBpZiAoIXNlc3Npb25EYXRhLnRhdCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHRhdCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfVEFUIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: init
          timestamp: '2025-12-29T07:50:43.211Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: c8681924-f1de-4e37-9456-cb43743ce863
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                location_id: L1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC Buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            fulfillments:
              - id: F1
                type: Delivery
                end:
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 12.966545,77.592074
                    address:
                      building: my building name or house
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                      locality: my street name
                      name: my house or door or floor
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        items: $.message.order.items[*]
        provider: $.message.order.provider
        billing: $.message.order.billing
        fulfillments: $.message.order.fulfillments[*]
        selected_np_fees: >-
          $.message.order.items[*].tags[?(@.code=="np_fees")].list[?(@.code=="id")].value
      inputs: {}
  - api: on_init
    action_id: on_init
    owner: BPP
    responseFor: init
    unsolicited: false
    description: Response to Init call
    mock:
      generate: >-
        ZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKCWlmIChpbml0aWFsaXplKSB7CgkJY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKCQlzYXZlZEJpbGxpbmcuY3JlYXRlZF9hdCA9IG5ld0lzbzsKCQlzYXZlZEJpbGxpbmcudXBkYXRlZF9hdCA9IG5ld0lzbzsKCX0KCXJldHVybiBzYXZlZEJpbGxpbmc7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUZ1bGZpbGxtZW50cygKCXNlc3Npb25EYXRhLAoJZGVmYXVsdEZ1bGZpbGxtZW50cwopIHsKCWlmIChkZWZhdWx0RnVsZmlsbG1lbnRzLmxlbmd0aCA8IDEpIHsKCQl0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwoJfQoKCQljb25zdCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CgkJcmV0dXJuIGZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKCQkJcmV0dXJuIHsKCQkJCWlkOiBmLmlkLAoJCQkJdHlwZTogZi50eXBlLAoJCQkJZW5kOiBmLmVuZCwKCQkJCXRyYWNraW5nOiB0cnVlLAoJCQl9OwoJCX0pOwoKfQphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgKCWRlZmF1bHRQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKCQlzZXNzaW9uRGF0YSwKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwoJKTsKCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZyA9IGdldFVwZGF0ZWRCaWxsaW5nKAoJCXNlc3Npb25EYXRhLmJpbGxpbmdbMF0KCSk7CglkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyID0gc2Vzc2lvbkRhdGEucHJvdmlkZXJbMF07CglkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07CglkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlLmJyZWFrdXAgPQoJCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUuYnJlYWt1cC5tYXAoKGIpID0+IHsKCQkJaWYgKGJbIkBvbmRjL29yZy90aXRsZV90eXBlIl0gPT09ICJpdGVtIikgewoJCQkJaWYgKGIuaXRlbSAmJiBiLml0ZW0ucXVhbnRpdHkpIGRlbGV0ZSBiLml0ZW0ucXVhbnRpdHk7CgkJCX0KCQkJcmV0dXJuIGI7CgkJfSk7CgoJZGVmYXVsdFBheWxvYWQuY29udGV4dC5tZXNzYWdlX2lkID0gc2Vzc2lvbkRhdGEubGF0ZXN0TWVzc2FnZV9pZFswXTsKCXJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQo=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzIChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_init
          timestamp: '2025-12-29T08:10:19.239Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: c2d4ecdb-b863-4eb0-ab35-8851e9c789be
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC Buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            fulfillments:
              - id: F1
                type: Delivery
                end:
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 12.966545,77.592074
                    address:
                      building: my building name or house
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                      locality: my street name
                      name: my house or door or floor
                tracking: true
            quote:
              price:
                value: '2756.75'
                currency: INR
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '2260.00'
                  item:
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '493.75'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '3.00'
              ttl: P1D
            payment:
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: XXXX
                  settlement_ifsc_code: XXXX
                  bank_name: XXXX
                  branch_name: XXXX
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: 37ABACA6712B1Z6
                  - code: provider_tax_number
                    value: USYDS6482D
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        bpp_terms: $.message.order.tags[?(@.code == 'bpp_terms')]
        tags: $.message.order.tags[*]
        fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: confirm
    action_id: confirm
    owner: BAP
    responseFor: null
    unsolicited: false
    description: Confirming the Order after Init
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewoJaWYgKGluaXRpYWxpemUpIHsKCQljb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwoJCXNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwoJCXNhdmVkQmlsbGluZy51cGRhdGVkX2F0ID0gbmV3SXNvOwoJfQoJcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCglzZXNzaW9uRGF0YSwKCWRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CglpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CgkJdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKCX0KCWNvbnN0IG9uU2VsZWN0RnVsZmlsbG1lbnRzID0KCQlzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwoJCWNvbnN0IGZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCQlyZXR1cm4gZnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewoJCQljb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50ID0gb25TZWxlY3RGdWxmaWxsbWVudHMuZmluZCgKCQkJCShvZikgPT4gb2YuaWQgPT09IGYuaWQKCQkJKTsKCQkJcmV0dXJuIHsKCQkJCWlkOiBmLmlkLAoJCQkJdHlwZTogZi50eXBlLAoJCQkJZW5kOiB7CgkJCQkJY29udGFjdDogZi5lbmQ/LmNvbnRhY3QsCgkJCQkJcGVyc29uOiB7CgkJCQkJCW5hbWU6ICJtb2NrLXBlcnNvbiIsCgkJCQkJfSwKCQkJCQlsb2NhdGlvbjogZi5lbmQ/LmxvY2F0aW9uLAoJCQkJfSwKCQkJCXRyYWNraW5nOiBmLnRyYWNraW5nLAoJCQkJIkBvbmRjL29yZy9jYXRlZ29yeSI6IG9uU2VsZWN0RnVsZmlsbG1lbnQ/LlsiQG9uZGMvb3JnL2NhdGVnb3J5Il0sCgkJCQkiQG9uZGMvb3JnL1RBVCI6IG9uU2VsZWN0RnVsZmlsbG1lbnQ/LlsiQG9uZGMvb3JnL1RBVCJdLAoJCQl9OwoJCX0pOwoJcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCglkZWZhdWx0UGF5bG9hZCwKCXNlc3Npb25EYXRhCikgewoJY29uc3QgdGltZUlzbyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gZ2VuZXJhdGVTaXhEaWdpdENvZGUoKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSB0aW1lSXNvOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJc287CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHNlc3Npb25EYXRhLnF1b3RlWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZyA9IGdldFVwZGF0ZWRCaWxsaW5nKAoJCXNlc3Npb25EYXRhLmJpbGxpbmdbMF0KCSk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQucGFyYW1zLmFtb3VudCA9CgkJc2Vzc2lvbkRhdGEucXVvdGVbMF0/LnByaWNlPy52YWx1ZTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQucGFyYW1zLnRyYW5zYWN0aW9uX2lkID0KCQkibW9ja19wYXltZW50X2lkXzEyMyI7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCgkJc2Vzc2lvbkRhdGEsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwoJKTsKICBjb25zdCBleGlzdGluZ1RhZ3MgPSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnRhZ3M7Cgljb25zdCBicHBUZXJtcyA9IGV4aXN0aW5nVGFncy5maW5kKChmKSA9PiBmLmNvZGUgPT09ICJicHBfdGVybXMiKTsKCWlmIChicHBUZXJtcykgewoJCWJwcFRlcm1zLmxpc3QgPSBzZXNzaW9uRGF0YS5icHBfdGVybXMubGlzdDsKCX0KCXJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVTaXhEaWdpdENvZGUoKSB7CglyZXR1cm4gTWF0aC5mbG9vcigxMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwKS50b1N0cmluZygpOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: confirm
          timestamp: '2025-12-29T08:39:38.573Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 60f5adb8-cc0b-4954-8742-265b5e03593b
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Created
            billing:
              address:
                building: my building name or house
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            provider:
              id: P1
              locations:
                - id: L1
            fulfillments:
              - '@ondc/org/TAT': P3D
                id: F1
                tracking: true
                end:
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  person:
                    name: ONDC Buyer
                  location:
                    gps: 12.966545,77.592074
                    address:
                      building: my building name or house
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                      locality: my street name
                      name: my house or door or floor
                type: Delivery
            payment:
              params:
                amount: '2756.75'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              uri: https://razorpay.com/
              tl_method: http/get
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: XXXX
                  settlement_ifsc_code: XXXX
                  bank_name: XXXX
                  branch_name: XXXX
            quote:
              price:
                currency: INR
                value: '2756.75'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Butterfly Beutiful 13 Gold Necklace
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '2260.00'
                  item:
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '493.75'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '3.00'
              ttl: P1D
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: 37ABACA6712B1Z6
                  - code: provider_tax_number
                    value: USYDS6482D
              - code: bap_terms
                list:
                  - code: accept_bpp_terms
                    value: 'Y'
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                  - code: tax_number
                    value: 37BABCA6712B1Z6
            created_at: '2024-08-14T09:11:00.810Z'
            updated_at: '2024-08-14T09:11:00.810Z'
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        payment: $.message.order.payment
        order_state: $.message.order.state
        order_created_at: $.message.order.created_at
        bap_terms: $.message.order.tags[?(@.code == 'bap_terms')]
        fulfillments: $.message.order.fulfillments[*]
        order_id: $.message.order.id
      inputs: {}
  - api: on_confirm
    action_id: on_confirm
    owner: BPP
    responseFor: confirm
    unsolicited: false
    description: On-confirm Response to the confirm call
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewoJaWYgKGluaXRpYWxpemUpIHsKCQljb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwoJCXNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwoJCXNhdmVkQmlsbGluZy51cGRhdGVkX2F0ID0gbmV3SXNvOwoJfQoJcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgc2Vzc2lvbkRhdGEsCiAgZGVmYXVsdEZ1bGZpbGxtZW50cwopIHsKICBpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KICBjb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50cyA9CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwoKICBjb25zdCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICByZXR1cm4gZnVsZmlsbG1lbnRzCiAgICAgIC5maWx0ZXIoKGYpID0+IG9uU2VsZWN0RnVsZmlsbG1lbnRzLnNvbWUoKHNmKSA9PiBzZi5pZCA9PT0gZi5pZCkpCiAgICAgIC5tYXAoKGYsIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPQogICAgICAgICAgb25TZWxlY3RGdWxmaWxsbWVudHMuZmluZCgoc2YpID0+IHNmLmlkID09PSBmLmlkKSB8fCB7fTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiBmLmlkLAogICAgICAgICAgdHlwZTogZi50eXBlLAogICAgICAgICAgdHJhY2tpbmc6IGYudHJhY2tpbmcsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogIlBlbmRpbmciLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgICJAb25kYy9vcmcvVEFUIjogc2VsZWN0ZWRbIkBvbmRjL29yZy9UQVQiXSwKICAgICAgICAgICJAb25kYy9vcmcvcHJvdmlkZXJfbmFtZSI6ICJTdG9yZSAxIiwKICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgICAgICAgaWQ6ICJMMSIsCiAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgbmFtZTogIlN0b3JlIDEiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZ3BzOiAiMTkuMTI5MDc2LDcyLjgyNTgwMyIsCiAgICAgICAgICAgICAgYWRkcmVzczogewogICAgICAgICAgICAgICAgc3RyZWV0OiAiMSAmIDIsQU1BUiBKWU9USSBDSFMuQkxERy4sT1BQLk5BTkQgS1JJUEEgSEFMTCIsCiAgICAgICAgICAgICAgICBsb2NhbGl0eTogIkFOREhFUkkgRk9VUiBCVU5HTE9XIEFNQVIgSllPVEkgQ0hTIiwKICAgICAgICAgICAgICAgIGNpdHk6ICJtb2NrLXNlbGxlci1jaXR5IiwKICAgICAgICAgICAgICAgIHN0YXRlOiAibW9jay1zdGF0ZSIsCiAgICAgICAgICAgICAgICBhcmVhX2NvZGU6ICI0MDAwNTMiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgICBwaG9uZTogIjk1OTQ2NjM3MTAiLAogICAgICAgICAgICAgIGVtYWlsOiAibm9ib2R5QG5vbWFpbC5jb20iLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIGVuZDogZi5lbmQsCiAgICAgICAgfTsKICAgICAgfSk7CiAgCn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAogIGRlZmF1bHRQYXlsb2FkLAogIHNlc3Npb25EYXRhCikgewogIGNvbnN0IHRpbWVJc28gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gdGltZUlzbzsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSBzZXNzaW9uRGF0YS5vcmRlcl9jcmVhdGVkX2F0WzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaWQgPSBzZXNzaW9uRGF0YS5vcmRlcl9pZFswXTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBnZXRVcGRhdGVkQmlsbGluZygKICAgIHNlc3Npb25EYXRhLmJpbGxpbmdbMF0KICApOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtczsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyID0gc2Vzc2lvbkRhdGEucHJvdmlkZXJbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCiAgICBzZXNzaW9uRGF0YSwKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCiAgKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50ID0gc2Vzc2lvbkRhdGEucGF5bWVudFswXTsKICBjb25zdCBleGlzdGluZ1RhZ3MgPSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnRhZ3MKICBjb25zdCBiYXBUZXJtcyA9IGV4aXN0aW5nVGFncy5maW5kKChmKSA9PiBmLmNvZGUgPT09ICJiYXBfdGVybXMiKTsKICBpZiAoYmFwVGVybXMpIHsKICAgIGJhcFRlcm1zLmxpc3QgPSBzZXNzaW9uRGF0YS5iYXBfdGVybXNbMF0ubGlzdAogICAgICAuZmlsdGVyKChpKSA9PiBpLmNvZGUgIT09ICJhY2NlcHRfYnBwX3Rlcm1zIikKICAgICAgLm1hcCgoaSkgPT4KICAgICAgICBpLmNvZGUgPT09ICJzdGF0aWNfdGVybXMiCiAgICAgICAgICA/IHsgLi4uaSwgdmFsdWU6ICJodHRwczovL2dpdGh1Yi5jb20vT05EQy1PZmZpY2lhbC9wcm90b2NvbC1uZXR3b3JrLWV4dGVuc2lvbi9kaXNjdXNzaW9ucy83OSIgfQogICAgICAgICAgOiBpCiAgICAgICk7CiAgfQogIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQubWVzc2FnZV9pZCA9IHNlc3Npb25EYXRhLm1lc3NhZ2VfaWRbMF0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0K
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvcmRlcl9pZCAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEub3JkZXJfaWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvcmRlcl9pZCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT1JERVJfSUQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiYXBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJhcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5iYXBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYmFwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CQVBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzdGF0ZSAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc3RhdGUpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzdGF0ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU1RBVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXltZW50IChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5wYXltZW50IHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5wYXltZW50ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheW1lbnQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWU1FTlQiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_confirm
          timestamp: '2025-12-29T08:51:49.239Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 2280275d-5d9a-413c-8c83-6ddc1db4e761
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Created
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': Store 1
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:03:32.230Z'
                      end: '2024-12-23T07:08:32.230Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:33:32.230Z'
                      end: '2024-12-23T07:04:32.230Z'
            quote:
              price:
                currency: INR
                value: '100.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            payment:
              params:
                amount: '100.00'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: 00ABCCH7409R1ZZ
                  - code: provider_tax_number
                    value: ABCDE1234F
                  - code: accept_bap_terms
                    value: 'Y'
              - code: bap_terms
                list:
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/protocol-network-extension/discussions/79
                  - code: tax_number
                    value: gst_number_of_buyerNP
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:03:32.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: on_status
    action_id: on_status_pending
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which accepts the order
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtczsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBnZXRVcGRhdGVkQmlsbGluZygKCQlzZXNzaW9uRGF0YS5iaWxsaW5nWzBdCgkpOwoJLy8gZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKCWNvbnN0IHRpbWVJU08gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gdGltZUlTTzsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSBzZXNzaW9uRGF0YS5vcmRlcl9jcmVhdGVkX2F0WzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnRbMF07CiAgLy8gaWYgKHNlc3Npb25EYXRhLnBheW1lbnQpIHsKICAvLyAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnQ7CiAgLy8gICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnRbIkBvbmRjL29yZy9zZXR0bGVtZW50X2RldGFpbHMiXS5wdXNoKAogIC8vICAgICBzZXNzaW9uRGF0YS5wYXltZW50WzBdWzBdCiAgLy8gICApOwogIC8vICAgc2Vzc2lvbkRhdGEucGF5bWVudCA9IG51bGw7CiAgLy8gfQogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAogIGRlZmF1bHRQYXlsb2FkLAogIHNlc3Npb25EYXRhCikgewogIGNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CiAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCiAgICAib25fc3RhdHVzIiwKICAgICJvbl9zdGF0dXNfYWNjZXB0ZWQiLAogICAgc2Vzc2lvbkRhdGEsCiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwogICk7CiAgcmV0dXJuIGdlbmVyYWxQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIGlmICghc2Vzc2lvbkRhdGEub3JkZXJfaWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvcmRlcl9pZCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT1JERVJfSUQiLAogICAgfTsKICB9CgogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgaWYgKCFzZXNzaW9uRGF0YS5wYXltZW50IHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5wYXltZW50ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheW1lbnQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWU1FTlQiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_status
          timestamp: '2025-12-29T09:59:28.640Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 4d630042-11e4-4944-b545-13f43c81f8f1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Accepted
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': Seller Business
                '@ondc/org/TAT': P3D
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: false
                start:
                  location:
                    id: L1
                    descriptor:
                      name: Seller Business
                    gps: 12.925810,77.583624
                    address:
                      building: my building name or house
                      country: IND
                      locality: my street name
                      city: Bengaluru
                      area_code: '560011'
                      state: Karnataka
                      name: my house or door or floor
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                  time:
                    range:
                      start: '2024-08-14T09:27:36.706Z'
                      end: '2024-08-16T09:27:36.707Z'
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 12.966545,77.592074
                    address:
                      building: my building name or house
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-08-17T09:27:36.706Z'
                      end: '2024-08-19T09:27:36.707Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
            quote:
              price:
                currency: INR
                value: '2756.75'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Butterfly Beautiful 13 Gold Necklace
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '2260.00'
                  item:
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '493.75'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '3.00'
              ttl: P1D
            payment:
              params:
                amount: '2756.75'
                currency: INR
                transaction_id: order_Okj0iihMKJod0V
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: '2024-08-14T09:11:00.810Z'
            updated_at: '2024-08-14T09:27:32.127Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_packed
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which is sent when the order is packed
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKCWNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CglnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKCQkib25fc3RhdHVzIiwKCQkib25fc3RhdHVzX3BhY2tlZCIsCgkJc2Vzc2lvbkRhdGEsCgkJZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKCSk7CglyZXR1cm4gZ2VuZXJhbFBheWxvYWQ7Cn0KCg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc3RhdHVzX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU1RBVFVTX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_status
          timestamp: '2025-12-29T09:59:28.640Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 4d630042-11e4-4944-b545-13f43c81f8f1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            state: In-progress
            items:
              - id: I1
                quantity:
                  count: 0
                fulfillment_id: F1
              - id: I1
                fulfillment_id: C1
                quantity:
                  count: 1
              - id: I1
                fulfillment_id: R1
                quantity:
                  count: 1
            billing:
              address:
                name: my house or door or floor
                building: my building name or house
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
              phone: '9898989898'
              name: ONDC Buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': Seller Business
                '@ondc/org/TAT': PT72H
                state:
                  descriptor:
                    code: Order-picked-up
                type: Delivery
                tracking: false
                start:
                  location:
                    id: L1
                    descriptor:
                      name: Epic Store
                    gps: 28.679701,77.063873
                    address:
                      locality: Nangloi Extension
                      city: New Delhi
                      area_code: '110041'
                      state: Delhi
                  contact:
                    email: test@gmail.com
                    phone: '9876543210'
                  time:
                    range:
                      start: '2025-01-28T16:21:50.523Z'
                      end: '2025-01-30T16:21:50.523Z'
                    timestamp: '2025-01-28T16:22:03.129Z'
                end:
                  person:
                    name: your-name
                  contact:
                    phone: '9876543210'
                  location:
                    gps: 28.679077,77.069714
                    address:
                      name: my house or door or floor
                      building: my building name or house
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                  time:
                    range:
                      start: '2025-01-31T16:21:50.523Z'
                      end: '2025-02-02T16:21:50.523Z'
                    timestamp: '2025-01-28T16:22:19.740Z'
              - state:
                  descriptor:
                    code: Cancelled
                type: Cancel
                id: C1
                tags:
                  - code: cancel_request
                    list:
                      - code: reason_id
                        value: '002'
                      - code: initiated_by
                        value: your-id
                  - code: quote_trail
                    list:
                      - code: type
                        value: item
                      - code: id
                        value: I1
                      - code: currency
                        value: INR
                      - code: value
                        value: '-40829.48'
              - id: R1
                type: Return
                state:
                  descriptor:
                    code: Return_Delivered
                tags:
                  - code: return_request
                    list:
                      - code: id
                        value: R1
                      - code: item_id
                        value: I1
                      - code: parent_item_id
                        value: ''
                      - code: item_quantity
                        value: '1'
                      - code: reason_id
                        value: '001'
                      - code: reason_desc
                        value: detailed description for return
                      - code: images
                        value: ''
                      - code: ttl_approval
                        value: PT24H
                      - code: ttl_reverseqc
                        value: P3D
                      - code: replace
                        value: 'yes'
                      - code: initiated_by
                        value: yournp.com
                  - code: replace_request
                    list:
                      - code: id
                        value: FR1
                  - code: quote_trail
                    list:
                      - code: type
                        value: item
                      - code: id
                        value: I1
                      - code: currency
                        value: INR
                      - code: value
                        value: '-40829.48'
                  - code: quote_trail
                    list:
                      - code: type
                        value: delivery
                      - code: id
                        value: R1
                      - code: currency
                        value: INR
                      - code: value
                        value: '582.63'
                '@ondc/org/provider_name': Epic Store
                start:
                  person:
                    name: your-name
                  contact:
                    phone: '9876543210'
                  location:
                    gps: 28.679077,77.069714
                    address:
                      name: my house or door or floor
                      building: my building name or house
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                    descriptor:
                      name: Epic Store
                  time:
                    timestamp: '2025-01-28T16:23:18.210Z'
                end:
                  location:
                    id: L1
                    descriptor:
                      name: Seller Business
                    gps: 12.966545,77.592074
                    address:
                      locality: Nangloi Extension
                      city: New Delhi
                      area_code: '110041'
                      state: Delhi
                  contact:
                    email: test@gmail.com
                    phone: '9876543210'
                  time:
                    timestamp: '2025-01-28T16:23:35.028Z'
              - id: FR1
                '@ondc/org/provider_name': ONDC Buyer
                '@ondc/org/TAT': P3D
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: false
                start:
                  location:
                    id: L1
                    descriptor:
                      name: Epic Store
                    gps: 28.679701,77.063873
                    address:
                      locality: Nangloi Extension
                      city: New Delhi
                      area_code: '110041'
                      state: Delhi
                  contact:
                    email: test@gmail.com
                    phone: '9876543210'
                  time:
                    range:
                      start: '2025-01-28T17:21:50.523Z'
                      end: '2025-01-30T17:21:50.523Z'
                    timestamp: '2025-01-28T19:22:51.523Z'
                end:
                  person:
                    name: your-name
                  contact:
                    phone: '9876543210'
                  location:
                    gps: 28.679077,77.069714
                    address:
                      name: my house or door or floor
                      building: my building name or house
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                  time:
                    range:
                      start: '2024-08-11T12:39:03.396Z'
                      end: '2024-08-13T12:39:03.396Z'
            quote:
              price:
                currency: INR
                value: '582.63'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 0
                  title: Golden Ring by saad
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    price:
                      currency: INR
                      value: '40829.48'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '0.00'
                - '@ondc/org/item_id': R1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '582.63'
              ttl: P1D
            payment:
              uri: https://razorpay.com/
              params:
                amount: '81658.96'
                currency: INR
                transaction_id: order_PovTljcF6RLpBs
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  upi_address: gft@oksbi
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  beneficiary_name: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
                - settlement_counterparty: buyer
                  settlement_phase: refund
                  settlement_type: upi
                  settlement_amount: '40829.48'
                  settlement_timestamp: '2025-01-28T16:21:40.763Z'
            id: 2025-01-28-470338
            created_at: '2025-01-28T16:17:08.546Z'
            updated_at: '2025-01-28T19:22:51.523Z'
            documents:
              - url: https://invoice_url
                label: Invoice
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_agent_assigned
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which is sent when an agent is assigned
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKCWNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CglnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKCQkib25fc3RhdHVzIiwKCQkib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIiwKCQlzZXNzaW9uRGF0YSwKCQlnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwoJKTsKCXJldHVybiBnZW5lcmFsUGF5bG9hZDsKfQoK
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_status
          timestamp: '2025-12-29T10:56:14.199Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: af2a3c40-b7cf-42d7-a761-b782fece87cd
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': Seller Business
                state:
                  descriptor:
                    code: Packed
                type: Delivery
                tracking: false
                '@ondc/org/TAT': P3D
                start:
                  location:
                    id: L1
                    descriptor:
                      name: Seller Business
                    gps: 12.925810,77.583624
                    address:
                      building: my building name or house
                      city: Bengaluru
                      area_code: '560011'
                      country: IND
                      state: Karnataka
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-08-14T09:27:36.706Z'
                      end: '2024-08-16T09:27:36.707Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 12.966545,77.592074
                    address:
                      building: my building name or house
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-08-17T09:27:36.706Z'
                      end: '2024-08-19T09:27:36.707Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
            quote:
              price:
                currency: INR
                value: '2756.75'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Butterfly Beautiful 13 Gold Necklace
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '2260.00'
                  item:
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '493.75'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '3.00'
              ttl: P1D
            payment:
              params:
                amount: '2756.75'
                currency: INR
                transaction_id: order_Okj0iihMKJod0V
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: '2024-08-14T09:11:00.810Z'
            updated_at: '2024-08-14T09:27:52.152'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_picked
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call when the rider picks up the order
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKCWNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CglnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKCQkib25fc3RhdHVzIiwKCQkib25fc3RhdHVzX3BpY2tlZCIsCgkJc2Vzc2lvbkRhdGEsCgkJZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKCSk7CglyZXR1cm4gZ2VuZXJhbFBheWxvYWQ7Cn0KCg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_status
          timestamp: '2025-12-29T11:01:59.338Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 4435a799-145f-4b9e-888c-0d4743f308cf
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': Seller Business
                '@ondc/org/TAT': P3D
                state:
                  descriptor:
                    code: Order-picked-up
                type: Delivery
                tracking: false
                start:
                  location:
                    id: L1
                    descriptor:
                      name: Seller Business
                    gps: 12.925810,77.583624
                    address:
                      building: my building name or house
                      country: IND
                      locality: my street name
                      city: Bengaluru
                      area_code: '560011'
                      state: Karnataka
                      name: my house or door or floor
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                  time:
                    range:
                      start: '2024-08-14T09:27:36.706Z'
                      end: '2024-08-16T09:27:36.707Z'
                    timestamp: '2024-08-14T09:27:57.891Z'
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 12.966545,77.592074
                    address:
                      building: my building name or house
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-08-17T09:27:36.706Z'
                      end: '2024-08-19T09:27:36.707Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
            quote:
              price:
                currency: INR
                value: '2756.75'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Butterfly Beautiful 13 Gold Necklace
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '2260.00'
                  item:
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '493.75'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '3.00'
              ttl: P1D
            payment:
              params:
                amount: '2756.75'
                currency: INR
                transaction_id: order_Okj0iihMKJod0V
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://dev-automation.ondc.org
                label: Invoice
            created_at: '2024-08-14T09:11:00.810Z'
            updated_at: '2024-08-14T09:28:03.142Z'
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
      inputs: {}
  - api: track
    action_id: track
    owner: BAP
    responseFor: null
    unsolicited: false
    description: Track sent to track the order
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyX2lkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CglyZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: track
          timestamp: '2025-12-29T11:04:37.868Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 5308242a-a069-44da-b746-07847d3c62bc
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order_id: O1
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_track
    action_id: on_track
    owner: BPP
    responseFor: track
    unsolicited: false
    description: On-track sent by the Seller Np in response to the track
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICAgIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQubWVzc2FnZV9pZCA9IHNlc3Npb25EYXRhLm1lc3NhZ2VfaWRbMF0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_track
          timestamp: '2025-12-29T11:06:29.036Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: fb346f40-c28b-4cb8-a0db-7a8d00a7041d
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          tracking:
            id: F1
            location:
              gps: 12.9740,77.6134
              time:
                timestamp: '2025-01-08T06:20:00.000Z'
              updated_at: '2025-01-08T06:30:00.000Z'
            status: active
            tags:
              - code: order
                list:
                  - code: id
                    value: O1
              - code: config
                list:
                  - code: attr
                    value: tracking.location.gps
                  - code: type
                    value: live_poll
              - code: path
                list:
                  - code: lat_lng
                    value: 12.9740,77.6134
                  - code: sequence
                    value: '1'
              - code: path
                list:
                  - code: lat_lng
                    value: 12.9740,77.6136
                  - code: sequence
                    value: '2'
              - code: path
                list:
                  - code: lat_lng
                    value: 12.9740,77.6136
                  - code: sequence
                    value: '3'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_status
    action_id: on_status_out_for_delivery
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status which marks that the order is out for delivery
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKCWNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CglnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKCQkib25fc3RhdHVzIiwKCQkib25fc3RhdHVzX291dF9mb3JfZGVsaXZlcnkiLAoJCXNlc3Npb25EYXRhLAoJCWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCgkpOwoJcmV0dXJuIGdlbmVyYWxQYXlsb2FkOwp9Cgo=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_status
          timestamp: '2025-12-29T11:08:18.485Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 7a8023f6-489f-4c4f-8ab9-7b528789446d
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-08-14T09:10:34.369Z'
              updated_at: '2024-08-14T09:10:34.369Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': Seller Business
                state:
                  descriptor:
                    code: Out-for-delivery
                type: Delivery
                tracking: false
                '@ondc/org/TAT': P3D
                start:
                  location:
                    id: L1
                    descriptor:
                      name: Seller Business
                    gps: 12.925810,77.583624
                    address:
                      building: my building name or house
                      city: Bengaluru
                      area_code: '560011'
                      country: IND
                      state: Karnataka
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-08-14T09:27:36.706Z'
                      end: '2024-08-16T09:27:36.707Z'
                    timestamp: '2024-08-14T09:27:57.891Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 12.966545,77.592074
                    address:
                      building: my building name or house
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-08-17T09:27:36.706Z'
                      end: '2024-08-19T09:27:36.707Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
            quote:
              price:
                currency: INR
                value: '2756.75'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Butterfly Beautiful 13 Gold Necklace
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '2260.00'
                  item:
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '493.75'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '3.00'
              ttl: P1D
            payment:
              params:
                amount: '2756.75'
                currency: INR
                transaction_id: order_Okj0iihMKJod0V
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: '2024-08-14T09:11:00.810Z'
            updated_at: '2024-08-14T09:28:14.849Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_order_delivered
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status which marks the order as delivered
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FjY2VwdGVkIjoKICAgICAgICBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKCWNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CglnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKCQkib25fc3RhdHVzIiwKCQkib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCIsCgkJc2Vzc2lvbkRhdGEsCgkJZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKCSk7CglyZXR1cm4gZ2VuZXJhbFBheWxvYWQ7Cn0KCg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET13
          action: on_status
          timestamp: '2025-12-29T11:15:59.263Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 1e4c08e3-28c0-48b8-8e7a-736fc58752e2
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Completed
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Order-delivered
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:03:32.230Z'
                      end: '2024-12-23T07:08:32.230Z'
                    timestamp: '2024-12-23T07:25:32.230Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:33:32.230Z'
                      end: '2024-12-23T07:04:32.230Z'
                    timestamp: '2024-12-23T07:45:32.230Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: 'yes'
                      - code: url_enabled
                        value: 'no'
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: '100.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            payment:
              params:
                amount: '100.00'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:45:32.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
transaction_history:
  - action_id: select
    payload:
      context:
        domain: ONDC:RET13
        action: select
        timestamp: '2026-02-23T11:32:21.706Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 5cac420e-0058-4afc-a0d7-e15af90a5914
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: std:011
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              quantity:
                count: 1
              location_id: L1
          fulfillments:
            - end:
                location:
                  gps: 19.129076,72.825803
                  address:
                    area_code: '400053'
    action: select
    saved_info: {}
  - action_id: on_select
    payload:
      context:
        domain: ONDC:RET13
        action: on_select
        timestamp: '2026-02-23T11:32:21.719Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 5cac420e-0058-4afc-a0d7-e15af90a5914
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          fulfillments:
            - id: F1
              type: Delivery
              '@ondc/org/provider_name': LSP or Provider Name
              tracking: true
              '@ondc/org/category': Standard Delivery
              '@ondc/org/TAT': P3D
              state:
                descriptor:
                  code: Serviceable
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '10'
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '10'
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '10'
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          items:
            - id: I1
              fulfillment_id: F1
            - id: I1
              fulfillment_id: F1
            - id: I1
              fulfillment_id: F1
    action: on_select
    saved_info: {}
  - action_id: init
    payload:
      context:
        domain: ONDC:RET13
        action: init
        timestamp: '2026-02-23T11:32:21.727Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: dee9f4a1-0650-4883-ac36-40ff0e6bc625
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
          offers: []
    action: init
    saved_info: {}
  - action_id: on_init
    payload:
      context:
        domain: ONDC:RET13
        action: on_init
        timestamp: '2026-02-23T11:32:21.739Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 5cac420e-0058-4afc-a0d7-e15af90a5914
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
              tracking: true
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          tags:
            - code: bpp_terms
              list:
                - code: np_type
                  value: MSN
                - code: tax_number
                  value: 37ABACA6712B1Z6
                - code: provider_tax_number
                  value: USYDS6482D
    action: on_init
    saved_info: {}
  - action_id: confirm
    payload:
      context:
        domain: ONDC:RET13
        action: confirm
        timestamp: '2026-02-23T11:32:21.746Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: af873cfa-e702-4319-90d4-448f728dc667
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '154830'
          state: Created
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          provider:
            id: P1
            locations:
              - id: L1
          fulfillments:
            - id: F1
              type: Delivery
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
              tracking: true
              '@ondc/org/category': Standard Delivery
              '@ondc/org/TAT': P3D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          tags:
            - code: bpp_terms
            - code: bap_terms
              list:
                - code: accept_bpp_terms
                  value: 'Y'
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                - code: tax_number
                  value: 37BABCA6712B1Z6
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.750Z'
    action: confirm
    saved_info: {}
  - action_id: on_confirm
    payload:
      context:
        domain: ONDC:RET13
        action: on_confirm
        timestamp: '2026-02-23T11:32:21.752Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: af873cfa-e702-4319-90d4-448f728dc667
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '154830'
          state: Created
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Pending
              '@ondc/org/TAT': P3D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          tags:
            - code: bpp_terms
              list:
                - code: np_type
                  value: MSN
                - code: tax_number
                  value: 00ABCCH7409R1ZZ
                - code: provider_tax_number
                  value: ABCDE1234F
                - code: accept_bap_terms
                  value: 'Y'
            - code: bap_terms
              list:
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/protocol-network-extension/discussions/79
                - code: tax_number
                  value: 37BABCA6712B1Z6
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.761Z'
    action: on_confirm
    saved_info: {}
  - action_id: on_status_pending
    payload:
      context:
        domain: ONDC:RET13
        action: on_status
        timestamp: '2026-02-23T11:32:21.763Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: f8303115-ef5b-4a44-9d76-73add9400f4b
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '154830'
          state: Accepted
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Pending
              '@ondc/org/TAT': P3D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
                time:
                  range:
                    start: '2026-02-23T11:42:21.766Z'
                    end: '2026-02-23T11:52:21.766Z'
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
                time:
                  range:
                    start: '2026-02-23T11:52:21.766Z'
                    end: '2026-02-26T11:42:21.766Z'
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: 'no'
                    - code: url_enabled
                      value: 'yes'
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.766Z'
    action: on_status
    saved_info: {}
  - action_id: on_status_packed
    payload:
      context:
        domain: ONDC:RET13
        action: on_status
        timestamp: '2026-02-23T11:32:21.771Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: e21108e4-76de-48be-8d50-55446631fd27
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          state: In-progress
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Packed
              '@ondc/org/TAT': P3D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
                time:
                  range:
                    start: '2026-02-23T11:42:21.766Z'
                    end: '2026-02-23T11:52:21.766Z'
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
                time:
                  range:
                    start: '2026-02-23T11:52:21.766Z'
                    end: '2026-02-26T11:42:21.766Z'
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: 'no'
                    - code: url_enabled
                      value: 'yes'
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          id: '154830'
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.775Z'
          documents:
            - url: https://invoice_url
              label: Invoice
    action: on_status
    saved_info: {}
  - action_id: on_status_agent_assigned
    payload:
      context:
        domain: ONDC:RET13
        action: on_status
        timestamp: '2026-02-23T11:32:21.781Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: f037bbeb-41c5-4b8c-bfca-090ff3ad1c01
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '154830'
          state: In-progress
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Agent-assigned
              '@ondc/org/TAT': P3D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
                time:
                  range:
                    start: '2026-02-23T11:42:21.766Z'
                    end: '2026-02-23T11:52:21.766Z'
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
                time:
                  range:
                    start: '2026-02-23T11:52:21.766Z'
                    end: '2026-02-26T11:42:21.766Z'
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: 'no'
                    - code: url_enabled
                      value: 'yes'
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: '9886098860'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.787Z'
    action: on_status
    saved_info: {}
  - action_id: on_status_picked
    payload:
      context:
        domain: ONDC:RET13
        action: on_status
        timestamp: '2026-02-23T11:32:21.792Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: dff84a9e-7d5b-43dc-96a3-d597eac1eeae
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '154830'
          state: In-progress
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Order-picked-up
              '@ondc/org/TAT': P3D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
                time:
                  range:
                    start: '2026-02-23T11:42:21.766Z'
                    end: '2026-02-23T11:52:21.766Z'
                  timestamp: '2026-02-23T11:32:21.804Z'
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
                time:
                  range:
                    start: '2026-02-23T11:52:21.766Z'
                    end: '2026-02-26T11:42:21.766Z'
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: 'no'
                    - code: url_enabled
                      value: 'yes'
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: '9886098860'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          documents:
            - url: https://dev-automation.ondc.org
              label: Invoice
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.804Z'
    action: on_status
    saved_info: {}
  - action_id: track
    payload:
      context:
        domain: ONDC:RET13
        action: track
        timestamp: '2026-02-23T11:32:21.815Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 388edf12-6c9e-426b-8fd9-ed13b308660d
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order_id: '154830'
    action: track
    saved_info: {}
  - action_id: on_track
    payload:
      context:
        domain: ONDC:RET13
        action: on_track
        timestamp: '2026-02-23T11:32:21.833Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: dff84a9e-7d5b-43dc-96a3-d597eac1eeae
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        tracking:
          id: F1
          location:
            gps: 12.9740,77.6134
            time:
              timestamp: '2025-01-08T06:20:00.000Z'
            updated_at: '2025-01-08T06:30:00.000Z'
          status: active
          tags:
            - code: order
              list:
                - code: id
                  value: O1
            - code: config
              list:
                - code: attr
                  value: tracking.location.gps
                - code: type
                  value: live_poll
            - code: path
              list:
                - code: lat_lng
                  value: 12.9740,77.6134
                - code: sequence
                  value: '1'
            - code: path
              list:
                - code: lat_lng
                  value: 12.9740,77.6136
                - code: sequence
                  value: '2'
            - code: path
              list:
                - code: lat_lng
                  value: 12.9740,77.6136
                - code: sequence
                  value: '3'
    action: on_track
    saved_info: {}
  - action_id: on_status_out_for_delivery
    payload:
      context:
        domain: ONDC:RET13
        action: on_status
        timestamp: '2026-02-23T11:32:21.846Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: 7bbcad20-4286-4866-b5b9-9f2483407251
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '154830'
          state: In-progress
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Out-for-delivery
              '@ondc/org/TAT': P3D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
                time:
                  range:
                    start: '2026-02-23T11:42:21.766Z'
                    end: '2026-02-23T11:52:21.766Z'
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
                time:
                  range:
                    start: '2026-02-23T11:52:21.766Z'
                    end: '2026-02-26T11:42:21.766Z'
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: 'no'
                    - code: url_enabled
                      value: 'yes'
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: '9886098860'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          documents:
            - url: https://invoice_url
              label: Invoice
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.850Z'
    action: on_status
    saved_info: {}
  - action_id: on_status_order_delivered
    payload:
      context:
        domain: ONDC:RET13
        action: on_status
        timestamp: '2026-02-23T11:32:21.857Z'
        transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
        message_id: b449d158-1824-47a5-bd82-ead4a50563df
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '154830'
          state: Completed
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
              location_id: L1
          billing:
            address:
              building: my building name or house
              city: Bengaluru
              state: Karnataka
              country: IND
              area_code: '560027'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC Buyer
            email: nobody@nomail.com
            created_at: '2026-02-23T11:32:16.737Z'
            updated_at: '2026-02-23T11:32:16.737Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Order-delivered
              '@ondc/org/TAT': P3D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
                time:
                  range:
                    start: '2026-02-23T11:42:21.766Z'
                    end: '2026-02-23T11:52:21.766Z'
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
                time:
                  range:
                    start: '2026-02-23T11:52:21.766Z'
                    end: '2026-02-26T11:42:21.766Z'
                  timestamp: '2026-02-23T11:32:21.862Z'
              tags:
                - code: routing
                  list:
                    - code: type
                      value: P2H2P
                - code: tracking
                  list:
                    - code: gps_enabled
                      value: 'no'
                    - code: url_enabled
                      value: 'yes'
                    - code: url
                      value: https://sellerNP.com/ondc/tracking_url
              agent:
                name: mock-agent
                phone: '9886098860'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: AHA PHA BHA 32%
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '2260.00'
                item:
                  price:
                    currency: INR
                    value: '2260'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '493.75'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '3.00'
            price:
              currency: INR
              value: '6780.00'
            ttl: P1D
          payment:
            params:
              amount: '6780.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            uri: https://razorpay.com/
            tl_method: http/get
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          documents:
            - url: https://invoice_url
              label: Invoice
          created_at: '2026-02-23T11:32:21.750Z'
          updated_at: '2026-02-23T11:32:21.862Z'
    action: on_status
    saved_info: {}
validationLib: ''
helperLib: >-
  Y29uc3QgUkVUMTNCUEMxMjVDYXRhbG9nID0gSlNPTi5wYXJzZSgKICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBjYXRhbG9nOiB7CiAgICAgICAgICAgICJicHAvZnVsZmlsbG1lbnRzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAiRjEiLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJEZWxpdmVyeSIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdLAogICAgICAgICAgICAiYnBwL2Rlc2NyaXB0b3IiOiB7CiAgICAgICAgICAgICAgICBuYW1lOiAiTW9jayBTZWxsZXIgTlAiLAogICAgICAgICAgICAgICAgc3ltYm9sOiAiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL25wLnBuZyIsCiAgICAgICAgICAgICAgICBzaG9ydF9kZXNjOiAiU2VsbGVyIE1hcmtldHBsYWNlIiwKICAgICAgICAgICAgICAgIGxvbmdfZGVzYzogIlNlbGxlciBNYXJrZXRwbGFjZSIsCiAgICAgICAgICAgICAgICBpbWFnZXM6IFsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL25wLnBuZyJdLAogICAgICAgICAgICAgICAgdGFnczogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImJwcF90ZXJtcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAibnBfdHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJNU04iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImJwcC9wcm92aWRlcnMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWQ6ICJQMSIsCiAgICAgICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogImVuYWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogIjIwMjQtMDgtMTNUMDY6NDY6MTkuNzM2WiIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB0dGw6ICJQVDI0SCIsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiTDEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3BzOiAiMTIuOTI1ODEwLDc3LjU4MzYyNCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogIkJlbmdhbHVydSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6ICJLYXJuYXRha2EiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFfY29kZTogIjU2MDAxMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWV0OiAiSmF5YW5hZ2FyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGl0eTogIkpheWFuYWdhciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiZW5hYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICIyMDI0LTA4LTEzVDA2OjQ2OjE5LjczNloiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheXM6ICIxLDIsMyw0LDUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGlkYXlzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiAiMDAwMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogIjIzNTkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3BzOiAiMTIuOTI1ODEwLDc3LjU4MzYyNCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6ICJrbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiNSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJTdG9yZSAxIiwKICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiAiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL3N0b3JlMS5wbmciLAogICAgICAgICAgICAgICAgICAgICAgICBzaG9ydF9kZXNjOiAiU3RvcmUgMSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdfZGVzYzogIlN0b3JlIDEiLAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IFsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL3N0b3JlMS5wbmciXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJWMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIlZhcmlhbnQgR3JvdXAgMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAidmFyaWFudF9ncm91cCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiYXR0ciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAibmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJpdGVtLnRhZ3MuYXR0cmlidXRlLnBsYXRpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAic2VxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiSTEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiZW5hYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICIyMDI0LTA4LTEyVDA1OjMwOjQ4Ljk5OFoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF9pdGVtX2lkOiAiVjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJBSEEgUEhBIEJIQSAzMiUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICIxOjg4MDkzMjYzMzM2NjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbDogImh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0X2Rlc2M6ICJXZWVrZW5kIEV4Zm9saWF0aW5nIEZhY2lhbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ19kZXNjOiAiQSBwb3dlcmZ1bCBwZWVsaW5nIHRyaW8gb2YgMjUlIEFIQSwgNSUgUEhBICYgMiUgQkhBIHRoYXQgcHJvdmlkZXMgbXVsdGktbGV2ZWwgZXhmb2xpYXRpb24sIGJvdGggb24gdGhlIHN1cmZhY2UgJiBpbnNpZGUgdGhlIHBvcmVzLCBnaXZpbmcgeW91IGEgaGVhbHRoeSwgcGx1bXAsIGFuZCBnbG93aW5nIHNraW4uRnJhZ3JhbmNlIGZyZWUuIE5vbi1jb21lZG9nZW5pYyAzMG1sIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRpemVkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lYXN1cmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6ICJtaWxpbGV0ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICIzMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6ICI5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAiOCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIjIyNjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1fdmFsdWU6ICIyMjYwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeV9pZDogIlNraW4gQ2FyZSAtIEZhY2UgQ2xlYW5zZXJzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJAb25kYy9vcmcvcmV0dXJuYWJsZSI6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJAb25kYy9vcmcvcmV0dXJuX3dpbmRvdyI6ICJQN0QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy9zZWxsZXJfcGlja3VwX3JldHVybiI6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy90aW1lX3RvX3NoaXAiOiAiUFQ1TSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL2F2YWlsYWJsZV9vbl9jb2QiOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy9jb250YWN0X2RldGFpbHNfY29uc3VtZXJfY2FyZSI6ICJNaW5pbWFsaXN0IEN1c3RvbWVyIENhcmUsaGVscEBiZW1pbmltYWxpc3QuY28sOTc3MjM0NjU1NSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZDogIkwxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGxtZW50X2lkOiAiRjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy9zdGF0dXRvcnlfcmVxc19wYWNrYWdlZF9jb21tb2RpdGllcyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXJfb3JfcGFja2VyX25hbWU6ICJTZWxsZXIgQnVzaW5lc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNlbGxlciBCdWlsZGluZyBBZGRyZXNzLCBKYXlhbmFnYXIsIEJlbmdhbHVydSwgS2FybmF0YWthLCBJbmRpYSAtIDU2MDAxMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uX29yX2dlbmVyaWNfbmFtZV9vZl9jb21tb2RpdHk6ICJBSEFzIChBbHBoYSBIeWRyb3h5IEFjaWRzKSBhbmQgQkhBcyAoQmV0YSBIeWRyb3h5IEFjaWRzKSBhbmQgUEhBIChQb2x5aHlkcm94eSBBY2lkKSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhfeWVhcl9vZl9tYW51ZmFjdHVyZV9wYWNraW5nX2ltcG9ydDogIjAzLzIwMjQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogIm9yaWdpbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiY291bnRyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJJTkQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImF0dHJpYnV0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiYnJhbmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiTWluaW1hbGlzdCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJJMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJlbmFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogIjIwMjQtMDgtMTJUMTA6Mjc6NDguOTEzWiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50X2l0ZW1faWQ6ICJWMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIk1hcnVsYSBPaWwgMDUlIE1vaXN0dXJpemVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiMTo4OTA2MTI4MTAwNDM2IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6ICJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydF9kZXNjOiAiRGVlcCAmIEludGVuc2UgTW9pc3R1cml6YXRpb24uIFRyZWF0cyBEcnluZXNzLCBSb3VnaG5lc3MgYW5kIEZsYWtpbmVzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ19kZXNjOiAiQW4gZXZlcnlkYXkgbW9pc3R1cml6aW5nIGNyZWFtIHdpdGggNSUgTWFydWxhIE9pbCwgcGFpcmVkIHdpdGggVml0YW1pbiBGIGFuZCBWaXRhbWluIEUgdG8gbm91cmlzaCwgbW9pc3R1cml6ZSBhbmQgaW1wcm92ZSBza2luIHNvZnRuZXNzLiBJdCdzIGEgaGVhdnkgY3JlYW0sIHN1aXRhYmxlIGZvciBkcnkvZGFtYWdlZCB0byBub3JtYWwgc2tpbiB0eXBlcy5GcmFncmFuY2UgZnJlZSAgICBOb24tY29tZWRvZ2VuaWMgICAgIDUwZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VzOiBbImh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRpemVkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lYXN1cmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6ICJncmFtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiNTAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAiOTkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogIjEwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k6ICJJTlIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiMjM2MCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bV92YWx1ZTogIjIzNjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeV9pZDogIlNraW4gQ2FyZSAtIExvdGlvbnMsIE1vaXN0dXJpc2VycywgYW5kIENyZWFtcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL3JldHVybmFibGUiOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy9jYW5jZWxsYWJsZSI6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiAiUDdEIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJAb25kYy9vcmcvdGltZV90b19zaGlwIjogIlBUNU0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjogdHJ1ZSwKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25faWQ6ICJMMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsbWVudF9pZDogIkYxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJAb25kYy9vcmcvY29udGFjdF9kZXRhaWxzX2NvbnN1bWVyX2NhcmUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZWxsZXIgQnVzaW5lc3MsdGVzdEBnbWFpbC5jb20sOTg3NjU0MzIxMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfbmFtZTogIlNlbGxlciBCdXNpbmVzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFudWZhY3R1cmVyX29yX3BhY2tlcl9hZGRyZXNzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU2VsbGVyIEJ1aWxkaW5nIEFkZHJlc3MsIEpheWFuYWdhciwgQmVuZ2FsdXJ1LCBLYXJuYXRha2EsIEluZGlhIC0gNTYwMDExIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tb25fb3JfZ2VuZXJpY19uYW1lX29mX2NvbW1vZGl0eTogIk1hcnVsYSBPaWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoX3llYXJfb2ZfbWFudWZhY3R1cmVfcGFja2luZ19pbXBvcnQ6ICIwMy8yMDI0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJvcmlnaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImNvdW50cnkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiSU5EIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJhdHRyaWJ1dGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJicmFuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJNaW5hbWlsaXN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiSTMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJOaWFjaW5hbWlkZSAwNSUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICIxOjg5MDYxMjgxMDAxMDgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbDogImh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0X2Rlc2M6ICJIeWRyYXRlcywgUmVwYWlycyAmIFNvb3RoZXMgU2tpbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ19kZXNjOiAiQSBub3VyaXNoaW5nICYgaHlkcmF0aW5nIGRhaWx5IHNlcnVtIHRoYXQgcmVwYWlycyBkYW1hZ2VkIGJhcnJpZXIgJiBzb290aGVzIHNlbnNpdGl2ZSBza2luLiBJZGVhbCBmb3IgcGVvcGxlIHdpdGggZHJ5LCBzZW5zaXRpdmUgc2tpbiAmIHRob3NlIHdobyBmaW5kIE5pYWNpbmFtaWRlIDEwJSBhIGxpdHRsZSBzdHJvbmcuRnJhZ3JhbmNlIGZyZWUgICAgTm9uLWNvbWVkb2dlbmljIDMwbWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlczogWyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogIklOUiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICI0OTkuMDAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1fdmFsdWU6ICIxMTk5LjAwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2F0ZWdvcnlfaWQiOiAiU2tpbiBDYXJlIC0gTG90aW9ucywgTW9pc3R1cmlzZXJzLCBhbmQgQ3JlYW1zIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmdWxmaWxsbWVudF9pZCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsb2NhdGlvbl9pZCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJAb25kYy9vcmcvcmV0dXJuYWJsZSI6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJAb25kYy9vcmcvcmV0dXJuX3dpbmRvdyI6ICJQN0QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy9zZWxsZXJfcGlja3VwX3JldHVybiI6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy90aW1lX3RvX3NoaXAiOiAiUFQ1TSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL2F2YWlsYWJsZV9vbl9jb2QiOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkBvbmRjL29yZy9jb250YWN0X2RldGFpbHNfY29uc3VtZXJfY2FyZSI6ICJNaW5pbWFsaXN0IEN1c3RvbWVyIENhcmUsc3VwcG9ydEBnbWFpbC5jb20sMjM0MzQ1MzQzNCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYW51ZmFjdHVyZXJfb3JfcGFja2VyX25hbWUiOiAiTWluaW1hbGlzdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzcyI6ICJTZWxsZXIgQnVpbGRpbmcgQWRkcmVzcywgSmF5YW5hZ2FyLCBCZW5nYWx1cnUsIEthcm5hdGFrYSwgSW5kaWEgLSA1NjAwMTEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb21tb25fb3JfZ2VuZXJpY19uYW1lX29mX2NvbW1vZGl0eSI6ICJOaWFjaW5hbWlkZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1vbnRoX3llYXJfb2ZfbWFudWZhY3R1cmVfcGFja2luZ19pbXBvcnQiOiAiMDMvMjAyNCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJlbmFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogIjIwMjQtMDgtMTJUMTA6Mjc6NDguOTEzWiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6ICI5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAiOTkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdGl6ZWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhc3VyZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6ICJ1bml0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJvcmlnaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImNvdW50cnkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiSU5EIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJhdHRyaWJ1dGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImJyYW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIk1pbmltYWxpc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIGZ1bGZpbGxtZW50czogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogIkYxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJEZWxpdmVyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICI5ODc2NTQzMjEwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogInRlc3RAZ21haWwuY29tIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBjcmVkczogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogImdpLTEyMzQ1Njc4IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiU29jaWFsIFNlY3RvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRfZGVzYzogIkdJIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2FiY2QuY2RuLmNvbS9pbWFnZXMvYmFkZ2UtaW1nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ2ZXJpZmljYXRpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInZlcmlmeV91cmwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiaHR0cHM6Ly9hYmNkLmdpLmNvbS92ZXJpZnk/aWQ9Z2ktMTIzNDU2NzgnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInZlcmlmaWVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIkNTUC1BQkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiaXNzdWVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIkV4YW1wbGUgQXV0aG9yaXR5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInZhbGlkX2Zyb20iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiMjAyMy0wNi0wM1QwMDowMDowMDowMDBaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInZhbGlkX3RvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIjIwMjQtMDYtMDNUMjM6NTk6NTk6OTk5WiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgdGFnczogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAic2VydmljZWFiaWxpdHkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogImxvY2F0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJMMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJjYXRlZ29yeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiU2tpbiBDYXJlIC0gTG90aW9ucywgTW9pc3R1cmlzZXJzLCBhbmQgQ3JlYW1zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiMTEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidW5pdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAicGluY29kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ2YWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIjU2MDAwMS01NjAwNzYsNTYwMDgzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInNlcnZpY2VhYmlsaXR5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJsb2NhdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiTDEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiY2F0ZWdvcnkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlNraW4gQ2FyZSAtIEZhY2UgQ2xlYW5zZXJzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiMTIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidW5pdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiY291bnRyeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ2YWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIklORCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ0aW1pbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIkFsbCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJsb2NhdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiTDEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiZGF5X2Zyb20iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAiZGF5X3RvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICI2IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogInRpbWVfZnJvbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiMDAwMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ0aW1lX3RvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICIyMzU5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgXSwKICAgICAgICB9LAogICAgfSkKKTs=
